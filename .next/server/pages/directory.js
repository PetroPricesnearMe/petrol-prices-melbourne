(()=>{var a={};a.id=985,a.ids=[985],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},499:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>q,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>o,getStaticProps:()=>n,handler:()=>y,reportWebVitals:()=>r,routeModule:()=>x,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>u,unstable_getStaticPaths:()=>t,unstable_getStaticProps:()=>s});var e=c(3885),f=c(237),g=c(1413),h=c(1009),i=c(1576),j=c(2668),k=c(2289),l=a([j]);j=(l.then?(await l)():l)[0];let m=(0,g.M)(j,"default"),n=(0,g.M)(j,"getStaticProps"),o=(0,g.M)(j,"getStaticPaths"),p=(0,g.M)(j,"getServerSideProps"),q=(0,g.M)(j,"config"),r=(0,g.M)(j,"reportWebVitals"),s=(0,g.M)(j,"unstable_getStaticProps"),t=(0,g.M)(j,"unstable_getStaticPaths"),u=(0,g.M)(j,"unstable_getStaticParams"),v=(0,g.M)(j,"unstable_getServerProps"),w=(0,g.M)(j,"unstable_getServerSideProps"),x=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/directory",pathname:"/directory",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:i.default,Document:h.default},userland:j}),y=(0,k.U)({srcPage:"/directory",config:q,userland:j,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});d()}catch(a){d(a)}})},1336:(a,b)=>{"use strict";function c(){let a=Object.create(null);return{on(b,c){(a[b]||(a[b]=[])).push(c)},off(b,c){a[b]&&a[b].splice(a[b].indexOf(c)>>>0,1)},emit(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(a[b]||[]).slice().map(a=>{a(...d)})}}}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},1757:(a,b)=>{"use strict";let c;function d(a){return(null==c?void 0:c.createScriptURL(a))||a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"__unsafeCreateTrustedScriptURL",{enumerable:!0,get:function(){return d}}),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},1918:(a,b)=>{"use strict";function c(a){return"/api"===a||!!(null==a?void 0:a.startsWith("/api/"))}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isAPIRoute",{enumerable:!0,get:function(){return c}})},1990:a=>{"use strict";a.exports=require("react-helmet-async")},2015:a=>{"use strict";a.exports=require("react")},2071:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{Router:function(){return f.default},createRouter:function(){return p},default:function(){return n},makePublicRouterInstance:function(){return q},useRouter:function(){return o},withRouter:function(){return i.default}});let d=c(7020),e=d._(c(2015)),f=d._(c(8747)),g=c(2088),h=d._(c(1644)),i=d._(c(7746)),j={router:null,readyCallbacks:[],ready(a){if(this.router)return a()}},k=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],l=["push","replace","reload","back","prefetch","beforePopState"];function m(){if(!j.router)throw Object.defineProperty(Error('No router instance found.\nYou should only use "next/router" on the client side of your app.\n'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return j.router}Object.defineProperty(j,"events",{get:()=>f.default.events}),k.forEach(a=>{Object.defineProperty(j,a,{get:()=>m()[a]})}),l.forEach(a=>{j[a]=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return m()[a](...c)}}),["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"].forEach(a=>{j.ready(()=>{f.default.events.on(a,function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];let e="on"+a.charAt(0).toUpperCase()+a.substring(1);if(j[e])try{j[e](...c)}catch(a){console.error("Error when running the Router event: "+e),console.error((0,h.default)(a)?a.message+"\n"+a.stack:a+"")}})})});let n=j;function o(){let a=e.default.useContext(g.RouterContext);if(!a)throw Object.defineProperty(Error("NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted"),"__NEXT_ERROR_CODE",{value:"E509",enumerable:!1,configurable:!0});return a}function p(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.router=new f.default(...b),j.readyCallbacks.forEach(a=>a()),j.readyCallbacks=[],j.router}function q(a){let b={};for(let c of k){if("object"==typeof a[c]){b[c]=Object.assign(Array.isArray(a[c])?[]:{},a[c]);continue}b[c]=a[c]}return b.events=f.default.events,l.forEach(c=>{b[c]=function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return a[c](...d)}}),b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},2309:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createRouteLoader:function(){return q},getClientBuildManifest:function(){return o},isAssetError:function(){return k},markAssetError:function(){return j}}),c(7020),c(2992);let d=c(1757),e=c(1994),f=c(9007),g=c(7787);function h(a,b,c){let d,e=b.get(a);if(e)return"future"in e?e.future:Promise.resolve(e);let f=new Promise(a=>{d=a});return b.set(a,{resolve:d,future:f}),c?c().then(a=>(d(a),a)).catch(c=>{throw b.delete(a),c}):f}let i=Symbol("ASSET_LOAD_ERROR");function j(a){return Object.defineProperty(a,i,{})}function k(a){return a&&i in a}let l=function(a){try{return a=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||a.relList.supports("prefetch")}catch(a){return!1}}(),m=()=>(0,f.getDeploymentIdQueryOrEmptyString)();function n(a,b,c){return new Promise((d,f)=>{let g=!1;a.then(a=>{g=!0,d(a)}).catch(f),(0,e.requestIdleCallback)(()=>setTimeout(()=>{g||f(c)},b))})}function o(){return self.__BUILD_MANIFEST?Promise.resolve(self.__BUILD_MANIFEST):n(new Promise(a=>{let b=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{a(self.__BUILD_MANIFEST),b&&b()}}),3800,j(Object.defineProperty(Error("Failed to load client build manifest"),"__NEXT_ERROR_CODE",{value:"E273",enumerable:!1,configurable:!0})))}function p(a,b){return o().then(c=>{if(!(b in c))throw j(Object.defineProperty(Error("Failed to lookup route: "+b),"__NEXT_ERROR_CODE",{value:"E446",enumerable:!1,configurable:!0}));let e=c[b].map(b=>a+"/_next/"+(0,g.encodeURIPath)(b));return{scripts:e.filter(a=>a.endsWith(".js")).map(a=>(0,d.__unsafeCreateTrustedScriptURL)(a)+m()),css:e.filter(a=>a.endsWith(".css")).map(a=>a+m())}})}function q(a){let b=new Map,c=new Map,d=new Map,f=new Map;function g(a){{var b;let d=c.get(a.toString());return d?d:document.querySelector('script[src^="'+a+'"]')?Promise.resolve():(c.set(a.toString(),d=new Promise((c,d)=>{(b=document.createElement("script")).onload=c,b.onerror=()=>d(j(Object.defineProperty(Error("Failed to load script: "+a),"__NEXT_ERROR_CODE",{value:"E74",enumerable:!1,configurable:!0}))),b.crossOrigin=void 0,b.src=a,document.body.appendChild(b)})),d)}}function i(a){let b=d.get(a);return b||d.set(a,b=fetch(a,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw Object.defineProperty(Error("Failed to load stylesheet: "+a),"__NEXT_ERROR_CODE",{value:"E189",enumerable:!1,configurable:!0});return b.text().then(b=>({href:a,content:b}))}).catch(a=>{throw j(a)})),b}return{whenEntrypoint:a=>h(a,b),onEntrypoint(a,c){(c?Promise.resolve().then(()=>c()).then(a=>({component:a&&a.default||a,exports:a}),a=>({error:a})):Promise.resolve(void 0)).then(c=>{let d=b.get(a);d&&"resolve"in d?c&&(b.set(a,c),d.resolve(c)):(c?b.set(a,c):b.delete(a),f.delete(a))})},loadRoute(c,d){return h(c,f,()=>{let e;return n(p(a,c).then(a=>{let{scripts:d,css:e}=a;return Promise.all([b.has(c)?[]:Promise.all(d.map(g)),Promise.all(e.map(i))])}).then(a=>this.whenEntrypoint(c).then(b=>({entrypoint:b,styles:a[1]}))),3800,j(Object.defineProperty(Error("Route did not complete loading: "+c),"__NEXT_ERROR_CODE",{value:"E12",enumerable:!1,configurable:!0}))).then(a=>{let{entrypoint:b,styles:c}=a,d=Object.assign({styles:c},b);return"error"in b?b:d}).catch(a=>{if(d)throw a;return{error:a}}).finally(()=>null==e?void 0:e())})},prefetch(b){let c;return(c=navigator.connection)&&(c.saveData||/2g/.test(c.effectiveType))?Promise.resolve():p(a,b).then(a=>Promise.all(l?a.scripts.map(a=>{var b,c,d;return b=a.toString(),c="script",new Promise((a,e)=>{let f='\n      link[rel="prefetch"][href^="'+b+'"],\n      link[rel="preload"][href^="'+b+'"],\n      script[src^="'+b+'"]';if(document.querySelector(f))return a();d=document.createElement("link"),c&&(d.as=c),d.rel="prefetch",d.crossOrigin=void 0,d.onload=a,d.onerror=()=>e(j(Object.defineProperty(Error("Failed to prefetch: "+b),"__NEXT_ERROR_CODE",{value:"E268",enumerable:!1,configurable:!0}))),d.href=b,document.head.appendChild(d)})}):[])).then(()=>{(0,e.requestIdleCallback)(()=>this.loadRoute(b,!0).catch(()=>{}))}).catch(()=>{})}}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},2326:a=>{"use strict";a.exports=require("react-dom")},2668:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>v,getStaticProps:()=>w});var e=c(8732),f=c(2015),g=c(4233),h=c(9788),i=c.n(h),j=c(9918),k=c.n(j),l=c(3138),m=c(49),n=c(9083),o=c(5822),p=c(3931),q=c(8113),r=c(5399),s=c(405),t=c(268),u=a([l]);function v({allStations:a,selectedRegionData:b}){let{region:c}=(0,g.useRouter)().query,[d]=(0,f.useState)(a),[h,j]=(0,f.useState)(a),[t,u]=(0,f.useState)(1),[v,w]=(0,f.useState)({}),[x,y]=(0,f.useState)("cards"),[z,A]=(0,f.useState)(null),B=c?m.WR[c.toUpperCase()]:null,C=(0,f.useCallback)(a=>{let b=[...d];if(B&&(b=b.filter(a=>(0,m.t_)(a.latitude,a.longitude,a.city).id===B.id)),a.search){let c=a.search.toLowerCase();b=b.filter(a=>a.name.toLowerCase().includes(c)||a.city.toLowerCase().includes(c)||a.address.toLowerCase().includes(c)),(0,s.Ar)(a.search,b.length)}a.fuelType&&"all"!==a.fuelType&&(b=b.filter(b=>b.fuelPrices?.some(b=>b.fuelType.toLowerCase()===a.fuelType.toLowerCase())),(0,s.qh)("fuel_type",a.fuelType)),a.brand&&"all"!==a.brand&&(b=b.filter(b=>b.brand.toLowerCase().includes(a.brand.toLowerCase())),(0,s.qh)("brand",a.brand)),a.sortBy&&b.sort((b,c)=>{switch(a.sortBy){case"name":return b.name.localeCompare(c.name);case"price-low":let d=b.fuelPrices?.reduce((a,b)=>a+b.price,0)/(b.fuelPrices?.length||1)||1/0,e=c.fuelPrices?.reduce((a,b)=>a+b.price,0)/(c.fuelPrices?.length||1)||1/0;return d-e;default:return 0}}),j(b),u(1)},[d,B]),D=(0,f.useCallback)(a=>{w(a),C(a)},[C]),E=Math.ceil(h.length/12),F=(t-1)*12,G=h.slice(F,F+12),H=a=>{u(a)},I=B?`${B.name} Petrol Stations - Live Fuel Prices`:"Melbourne Petrol Stations Directory - Live Fuel Prices",J=B?`Find the cheapest petrol prices in ${B.name}, Melbourne. Compare real-time fuel prices from ${h.length}+ stations.`:`Browse ${h.length}+ petrol stations across Melbourne. Compare live fuel prices and find the cheapest petrol near you.`;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i(),{children:[(0,e.jsx)("title",{children:I}),(0,e.jsx)("meta",{name:"description",content:J}),(0,e.jsx)("meta",{name:"keywords",content:`petrol prices ${B?.name||"melbourne"}, fuel prices ${B?.name||"melbourne"}, cheapest petrol, station directory`}),(0,e.jsx)("link",{rel:"canonical",href:`/directory${c?`?region=${c}`:""}`}),(0,e.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify((0,r.nF)(h.slice(0,10)))}})]}),(0,e.jsxs)("div",{className:"directory-page",children:[(0,e.jsx)(q.A,{customCrumbs:B?[{label:"Home",path:"/",icon:"\uD83C\uDFE0"},{label:"Station Directory",path:"/directory"},{label:B.name,path:`/directory?region=${c}`,isActive:!0}]:void 0}),(0,e.jsx)("div",{className:"directory-header",children:(0,e.jsx)("div",{className:"container",children:(0,e.jsx)(l.Uu,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:(0,e.jsxs)("div",{className:"header-content",children:[(0,e.jsx)(k(),{href:"/",className:"back-link","aria-label":"Back to regions",children:"← Back to Regions"}),(0,e.jsx)("h1",{children:B?B.name:"All Melbourne Petrol Stations"}),B&&(0,e.jsx)("p",{className:"region-description",children:B.description}),(0,e.jsx)("div",{className:"header-stats",children:(0,e.jsxs)("div",{className:"stat",children:[(0,e.jsx)("span",{className:"stat-number",children:h.length}),(0,e.jsx)("span",{className:"stat-label",children:"Stations Found"})]})})]})})})}),(0,e.jsx)(n.A,{onFilterChange:D,stationsCount:h.length,totalStations:d.length}),(0,e.jsx)("div",{className:"view-controls",children:(0,e.jsx)("div",{className:"container",children:(0,e.jsxs)("div",{className:"view-toggle",children:[(0,e.jsx)("button",{className:`view-btn ${"cards"===x?"active":""}`,onClick:()=>y("cards"),children:"\uD83D\uDCCB Cards"}),(0,e.jsx)("button",{className:`view-btn ${"map"===x?"active":""}`,onClick:()=>y("map"),children:"\uD83D\uDDFA️ Map"})]})})}),"map"===x?(0,e.jsx)(o.A,{stations:h,onStationClick:a=>A(a)}):(0,e.jsx)(p.A,{stations:G,onStationClick:a=>A(a)}),"map"!==x&&E>1&&(0,e.jsxs)("div",{className:"pagination",children:[(0,e.jsx)("button",{onClick:()=>H(t-1),disabled:1===t,children:"Previous"}),(0,e.jsxs)("span",{children:["Page ",t," of ",E]}),(0,e.jsx)("button",{onClick:()=>H(t+1),disabled:t===E,children:"Next"})]})]})]})}async function w(a){return console.log("\uD83C\uDFD7️ [Build] Generating DirectoryPage..."),{props:{allStations:(await (0,t.fG)()).map(a=>({...a,fuelPrices:a.prices?Object.entries(a.prices).map(([a,b])=>({fuelType:a,price:parseFloat(b||0)})):[]})),selectedRegionData:null},revalidate:86400}}l=(u.then?(await u)():u)[0],d()}catch(a){d(a)}})},2992:(a,b)=>{"use strict";function c(a,b){return void 0===b&&(b=""),("/"===a?"/index":/^\/index(\/|$)/.test(a)?"/index"+a:a)+b}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3220:a=>{"use strict";a.exports=import("framer-motion")},3700:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"parseRelativeUrl",{enumerable:!0,get:function(){return e}}),c(6373);let d=c(3841);function e(a,b,c){void 0===c&&(c=!0);let e=new URL("http://n"),f=b?new URL(b,e):a.startsWith(".")?new URL("http://n"):e,{pathname:g,searchParams:h,search:i,hash:j,href:k,origin:l}=new URL(a,f);if(l!==e.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+a),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:g,query:c?(0,d.searchParamsToUrlQuery)(h):void 0,search:i,hash:j,href:k.slice(l.length),slashes:void 0}}},3873:a=>{"use strict";a.exports=require("path")},3931:(a,b,c)=>{"use strict";c.d(b,{A:()=>n});var d=c(8732),e=c(2015);let f={baserow:{publicToken:process.env.REACT_APP_BASEROW_PUBLIC_TOKEN||"MIhg-ye0C_K99qvwTzoH6MCvTMAHLbwHR0C4aZKP674",token:process.env.REACT_APP_BASEROW_TOKEN||"G2bhijqxqtg0O05dc176fwDpaUPDSIgj",apiUrl:process.env.REACT_APP_BASEROW_API_URL||"https://api.baserow.io/api",databaseId:265358,mcpSseUrl:process.env.REACT_APP_BASEROW_SSE_URL||"https://api.baserow.io/mcp/ta1A1XNRrNHFLKV16tV3I0cSdkIzm9bE/sse"},api:{baseUrl:process.env.REACT_APP_API_URL||("localhost"===window.location.hostname?"http://localhost:3001":"/api")},tables:{petrolStations:{id:623329,name:"Petrol Stations"},fuelPrices:{id:623330,name:"Fuel Prices"},airtableImport:{id:623331,name:"Airtable import report"}},app:{name:process.env.REACT_APP_APP_NAME||"Petrol Prices Near Me",description:process.env.REACT_APP_APP_DESCRIPTION||"Melbourne Petrol Stations"}},g={async fetchWithRetry(a,b={},c=3){let d;for(let e=0;e<c;e++)try{let c=new AbortController,d=setTimeout(()=>c.abort(),15e3),f=await fetch(a,{...b,signal:c.signal});if(clearTimeout(d),429===f.status){let a=f.headers.get("Retry-After"),b=a?1e3*parseInt(a):1e3*Math.pow(2,e);await new Promise(a=>setTimeout(a,b));continue}if(f.status>=400&&f.status<500&&429!==f.status)throw Error(`HTTP ${f.status}: ${f.statusText}`);if(f.ok)return f;throw Error(`HTTP ${f.status}: ${f.statusText}`)}catch(b){if(d=b,e===c-1)throw d;let a=1e3*Math.pow(2,e);await new Promise(b=>setTimeout(b,a))}throw d},async fetchAllStations(){if(!f.api.baseUrl||"/api"===f.api.baseUrl)try{return await this.fetchAllStationsDirect(f.tables.petrolStations.id)}catch(a){throw a}try{let a=await this.fetchWithRetry(`${f.api.baseUrl}/api/stations/all`,{method:"GET",headers:{"Content-Type":"application/json"}},3),b=await a.json();if(!b.success)throw Error(b.error||"Failed to fetch stations");return b.data}catch(a){if(a.message.includes("NetworkError")||a.message.includes("Failed to fetch")||"AbortError"===a.name)try{return await this.fetchAllStationsDirect(f.tables.petrolStations.id)}catch(a){throw a}throw a}},async createStation(a){try{let b=await fetch(`${f.api.baseUrl}/api/stations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(1e4)});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);let c=await b.json();if(!c.success)throw Error(c.error||"Failed to create station");return c.data}catch(a){throw a}},async updateStation(a,b){try{let c=await fetch(`${f.api.baseUrl}/api/stations/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(1e4)});if(!c.ok)throw Error(`HTTP ${c.status}: ${c.statusText}`);let d=await c.json();if(!d.success)throw Error(d.error||"Failed to update station");return d.data}catch(a){throw a}},async deleteStation(a){try{let b=await fetch(`${f.api.baseUrl}/api/stations/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);let c=await b.json();if(!c.success)throw Error(c.error||"Failed to delete station");return!0}catch(a){throw a}},async getTableFields(a){try{let b=await fetch(`${f.api.baseUrl}/api/baserow/fields/${a}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!b.ok)throw Error(`HTTP ${b.status}: ${b.statusText}`);let c=await b.json();if(!c.success)throw Error(c.error||"Failed to fetch table fields");return c.data}catch(a){throw a}},async fetchAllStationsDirect(a){let b=[],c=f.baserow.publicToken&&"your_public_token_here"!==f.baserow.publicToken,d=c?`${f.baserow.apiUrl}/database/rows/table/${a}/?user_field_names=true&size=100&public_token=${f.baserow.publicToken}`:`${f.baserow.apiUrl}/database/rows/table/${a}/?user_field_names=true&size=100`;try{for(;d;){let a={"Content-Type":"application/json",Accept:"application/json"};c||(a.Authorization=`Token ${f.baserow.token}`);let e=await this.fetchWithRetry(d,{method:"GET",headers:a,mode:"cors",credentials:"omit"},3),g=await e.json();if(!Array.isArray(g.results))throw Error("Unexpected API response structure");b.push(...g.results),d=g.next?c?`${g.next}&public_token=${f.baserow.publicToken}`:g.next:null}return b}catch(a){throw a}},async testConnection(){try{let a=await fetch(`${f.api.baseUrl}/api/baserow/test`);return await a.json()}catch(a){throw a}}};class h{constructor(){this.cache=null,this.cacheTimestamp=null,this.CACHE_DURATION=18e5}async fetchStations(){if(this.cache&&this.cacheTimestamp&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION)return console.log("\uD83D\uDCE6 Returning cached local data"),this.cache;try{console.log("\uD83D\uDDFA️ Loading stations from local GeoJSON...");let a=await this.loadGeoJSON();if(a&&a.length>0)return console.log(`✅ Loaded ${a.length} stations from GeoJSON`),this.cache=a,this.cacheTimestamp=Date.now(),a;console.log("\uD83D\uDCC4 Falling back to CSV data...");let b=await this.loadCSV();if(b&&b.length>0)return console.log(`✅ Loaded ${b.length} stations from CSV`),this.cache=b,this.cacheTimestamp=Date.now(),b;throw Error("No local data files available")}catch(a){throw console.error("❌ Error loading local data:",a),a}}async loadGeoJSON(){try{let a=await fetch("/data/stations.geojson");if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let b=await a.json();if(!b.features||!Array.isArray(b.features))throw Error("Invalid GeoJSON format");return b.features.map((a,b)=>this.parseGeoJSONFeature(a,b))}catch(a){return console.warn("Could not load GeoJSON:",a.message),null}}parseGeoJSONFeature(a,b){let c=a.properties||{},d=a.geometry?.coordinates||[0,0],e=c.station_owner||"",f=e;e.includes("7-ELEVEN")||e.includes("7 ELEVEN")?f="7-Eleven":e.includes("BP")?f="BP":e.includes("SHELL")?f="Shell":e.includes("CALTEX")?f="Caltex":e.includes("AMPOL")?f="Ampol":e.includes("MOBIL")?f="Mobil":e.includes("UNITED")&&(f="United");let g=this.getRegionFromSuburb(c.station_suburb||"");return{id:c.objectid||b+1,name:c.station_name||"Unknown Station",address:c.station_address||c.gnaf_formatted_address||"",city:c.station_suburb||c.gnaf_suburb||"",postalCode:c.station_postcode||c.gnaf_postcode||"",region:g,state:c.station_state||"VIC",brand:f,category:c.feature_type||"PETROL STATION",Latitude:d[1],Longitude:d[0],lat:d[1],lng:d[0],operationalStatus:c.operational_status||"OPERATIONAL",description:c.station_description||"",lastUpdated:c.station_revised_date||new Date().toISOString(),spatialConfidence:c.spatial_confidence,industryId:c.industry_id,fuelPrices:this.generateMockPrices(f)}}generateMockPrices(a){let b={BP:{base:1.95,variance:.05},Shell:{base:1.93,variance:.05},Caltex:{base:1.94,variance:.05},Ampol:{base:1.92,variance:.05},"7-Eleven":{base:1.89,variance:.05},Mobil:{base:1.96,variance:.05},United:{base:1.88,variance:.05},default:{base:1.94,variance:.08}},c=b[a]||b.default,d=c.base+(Math.random()-.5)*c.variance*2;return{unleaded:d.toFixed(2),premium:(d+.15).toFixed(2),diesel:(d-.03).toFixed(2),e10:(d-.05).toFixed(2),lastUpdated:new Date().toISOString()}}getRegionFromSuburb(a){if(!a)return"VIC";let b=a.toUpperCase();return["PRESTON","COBURG","ESSENDON","TULLAMARINE","EPPING","THOMASTOWN","WOLLERT","CRAIGIEBURN","BROADMEADOWS","GREENSBOROUGH","ELTHAM"].some(a=>b.includes(a))?"North Melbourne":["FOOTSCRAY","SUNSHINE","WERRIBEE","POINT COOK","BROOKLYN","DEER PARK","HOPPERS CROSSING","ALTONA","WILLIAMSTOWN","MARIBYRNONG"].some(a=>b.includes(a))?"West Melbourne":["DONCASTER","BOX HILL","RINGWOOD","GLEN WAVERLEY","BURWOOD","MITCHAM","BLACKBURN","NUNAWADING","CROYDON","BAYSWATER"].some(a=>b.includes(a))?"East Melbourne":["MELBOURNE","CARLTON","FITZROY","SOUTH YARRA","RICHMOND","COLLINGWOOD","NORTHCOTE","BRUNSWICK","PARKVILLE","KENSINGTON","ABBOTSFORD"].some(a=>b.includes(a))?"Melbourne CBD":["FRANKSTON","DANDENONG","CRANBOURNE","CLAYTON","SPRINGVALE","NOBLE PARK","CHELTENHAM","MOORABBIN","MORDIALLOC","BENTLEIGH"].some(a=>b.includes(a))?"South East Melbourne":"VIC"}async loadCSV(){try{let a=await fetch("/data/stations.csv");if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let b=await a.text();return this.parseCSV(b)}catch(a){return console.warn("Could not load CSV:",a.message),null}}parseCSV(a){let b=a.split("\n");if(b.length<2)return[];let c=b[0].split("|").map(a=>a.trim());return b.slice(1).filter(a=>a.trim()).map((a,b)=>{let d=a.split("|"),e={};return c.forEach((a,b)=>{e[a]=d[b]?d[b].trim():""}),{id:e.id||b+1,name:e["Station Name"]||"Unknown Station",address:e.Address||"",city:e.City||"",postalCode:e["Postal Code"]||"",region:e.Region||"VIC",category:e.Category||"PETROL STATION",brand:this.extractBrandFromCSV(e.brand),Latitude:0,Longitude:0,lat:0,lng:0,operationalStatus:"OPERATIONAL",locationDetails:e["Location Details"]||"",lastUpdated:new Date().toISOString(),fuelPrices:this.generateMockPrices(this.extractBrandFromCSV(e.brand))}})}extractBrandFromCSV(a){if(!a)return"Independent";let b=a.split("(")[0].trim();return b&&"Untitled.png"!==b?b:"Independent"}clearCache(){this.cache=null,this.cacheTimestamp=null}}let i=new h;class j{constructor(){this.activeSource="local",this.dataCache=new Map,this.isLoading=!1,this.lastFetchTime=null,this.cacheTimeout=3e5}getActiveSource(){return this.activeSource}setActiveSource(a){console.log(`🔄 Switching data source from ${this.activeSource} to ${a}`),this.activeSource=a,this.clearCache()}clearCache(){console.log("\uD83D\uDDD1️ Clearing data cache"),this.dataCache.clear(),this.lastFetchTime=null}isCacheValid(){return!!this.lastFetchTime&&Date.now()-this.lastFetchTime<this.cacheTimeout}validateStationData(a,b){if(!a||"object"!=typeof a)return{valid:!1,reason:"Invalid station object"};let c=a.Latitude||a.latitude||a.lat||a.Y||a.field_5072136||a.field5072136||null,d=a.Longitude||a.longitude||a.lng||a.X||a.field_5072137||a.field5072137||null;return(null!==c&&"string"==typeof c&&(c=parseFloat(c)),null!==d&&"string"==typeof d&&(d=parseFloat(d)),null===c||null===d||isNaN(c)||isNaN(d))?(console.warn(`⚠️ Station ${b+1} has invalid coordinates:`,{lat:c,lng:d,stationId:a.id,stationName:a["Station Name"]||a.station_name||a.name,availableFields:Object.keys(a).filter(a=>a.toLowerCase().includes("lat")||a.toLowerCase().includes("long")||a.toLowerCase().includes("x")||a.toLowerCase().includes("y"))}),{valid:!1,reason:"Invalid coordinates"}):c<-45||c>-10||d<110||d>155?(console.warn(`⚠️ Station ${b+1} outside Australia:`,{lat:c,lng:d,name:a["Station Name"]||a.station_name||a.name}),{valid:!1,reason:"Coordinates outside Australia"}):{valid:!0,lat:c,lng:d}}transformStationData(a,b){let c=this.validateStationData(a,b);if(!c.valid)return null;let d=function(a,b){let c=function(a,b=0){let c=[];if(!a||"object"!=typeof a)return{valid:!1,errors:[`Station at index ${b} is not an object`],data:null};let d=a.id||a.Id;d||c.push(`Station at index ${b} missing id`);let e=a["Station Name"]||a.station_name||a.field_5072130||a.name;e&&"string"==typeof e||c.push(`Station at index ${b} missing or invalid name`);let f=parseFloat(a.Latitude||a.Y||a.lat||a.latitude||a.field_5072136),g=parseFloat(a.Longitude||a.X||a.lng||a.longitude||a.field_5072137);!f||!g||isNaN(f)||isNaN(g)?c.push(`Station at index ${b} has invalid coordinates: lat=${f}, lng=${g}`):((f<-90||f>90)&&c.push(`Station at index ${b} has invalid latitude: ${f} (must be between -90 and 90)`),(g<-180||g>180)&&c.push(`Station at index ${b} has invalid longitude: ${g} (must be between -180 and 180)`));let h=a["Fuel Prices"]||a.field_5072139||a.fuelPrices;return 0===(h=Array.isArray(h)?h.filter(a=>a&&"object"==typeof a&&a.type):[]).length&&(h=[]),{valid:0===c.length,errors:c,data:0===c.length?{id:d,name:e,lat:f,lng:g,address:a.Address||a.station_address||a.field_5072131||a.address,city:a.City||a.station_suburb||a.field_5072132||a.city,region:a.Region||a.station_state||a.field_5072134||a.region,postalCode:a["Postal Code"]||a.station_postcode||a.field_5072133||a.postalCode,country:a.Country||a.field_5072135||a.country||"AUSTRALIA",category:a.Category||a.feature_type||a.field_5072138||a.category,locationDetails:a["Location Details"]||a.station_description||a.field_5072140||a.locationDetails,fuelPrices:h,brand:a.brand||a.station_owner||a.Brand}:null}}(a,b);return c.valid?{valid:!0,station:{id:c.data.id,name:c.data.name,lat:c.data.lat,lng:c.data.lng,address:c.data.address||`${c.data.city||"Melbourne"}, VIC`,city:c.data.city||"Melbourne",region:c.data.region,postalCode:c.data.postalCode,country:c.data.country,category:c.data.category,locationDetails:c.data.locationDetails,fuelPrices:c.data.fuelPrices,brand:c.data.brand||"Unknown",prices:{unleaded:180+20*Math.random(),premium:190+20*Math.random(),premium98:200+25*Math.random(),diesel:175+20*Math.random(),gas:85+15*Math.random()},source:"baserow",lastUpdated:new Date().toISOString()},errors:[]}:(console.warn(`⚠️ Invalid station at index ${b}:`,c.errors),{valid:!1,station:null,errors:c.errors})}(a,b);return d.valid?{...d.station,latitude:c.lat,longitude:c.lng,lat:c.lat,lng:c.lng,source:this.activeSource,fuelPrices:Array.isArray(d.station.fuelPrices)?d.station.fuelPrices.filter(a=>a&&"object"==typeof a):[]}:(console.warn(`⚠️ Skipping invalid station at index ${b}:`,d.errors),null)}async fetchStations(a=!1){let b=`stations_${this.activeSource}`;if(!a&&this.isCacheValid()&&this.dataCache.has(b))return console.log("\uD83D\uDCE6 Returning cached station data"),this.dataCache.get(b);if(this.isLoading)return console.log("⏳ Data fetch already in progress, waiting..."),new Promise((a,c)=>{let d=Date.now(),e=()=>{let f=Date.now()-d;this.isLoading?f>=15e3?(console.error(`⏰ Wait timeout after ${f}ms - isLoading flag stuck!`),this.isLoading=!1,c(Error("Data fetch wait timeout - concurrent request took too long"))):setTimeout(e,100):(console.log(`✅ Wait completed after ${f}ms`),a(this.dataCache.get(b)||[]))};e()});try{this.isLoading=!0,console.log(`🚀 Fetching stations from ${this.activeSource}...`);let a=[];switch(this.activeSource){case"local":try{a=await i.fetchStations()}catch(b){console.warn("⚠️ Local data failed, trying Baserow...",b.message),this.setActiveSource("baserow");try{a=await g.fetchAllStations()}catch(b){console.warn("⚠️ Baserow also failed, using mock data",b.message),this.setActiveSource("mock"),a=this.getMockStations()}}break;case"baserow":try{a=await g.fetchAllStations()}catch(b){console.warn("⚠️ Baserow API failed, falling back to mock data:",b.message),console.log("\uD83D\uDD04 Switching to mock data source due to API issues"),this.setActiveSource("mock"),a=this.getMockStations()}break;case"airtable":throw Error("Airtable integration not implemented");case"mock":a=this.getMockStations();break;default:throw Error(`Unknown data source: ${this.activeSource}`)}if(console.log(`📊 Raw data received: ${a.length} stations from ${this.activeSource}`),!Array.isArray(a)||0===a.length)throw Error(`No station data received from ${this.activeSource}`);let c=a.map((a,b)=>this.transformStationData(a,b)).filter(a=>null!==a);if(console.log(`📈 Data transformation complete:`),console.log(`   - Raw stations: ${a.length}`),console.log(`   - Valid stations: ${c.length}`),console.log(`   - Invalid stations: ${a.length-c.length}`),0===c.length)throw Error("No valid stations found after data transformation");return c.length<10&&console.warn(`⚠️ Only ${c.length} valid stations found - this may indicate data quality issues`),this.dataCache.set(b,c),this.lastFetchTime=Date.now(),console.log(`✅ Successfully loaded ${c.length} stations from ${this.activeSource}`),c}catch(c){console.error(`❌ Error fetching stations from ${this.activeSource}:`,c);let a=function(a,b="processing request"){let c="string"==typeof a?a:a.message||"Unknown error";return c.includes("NetworkError")||c.includes("Failed to fetch")?"Unable to connect to the server. Please check your internet connection and try again.":c.includes("timeout")||c.includes("AbortError")?"The request is taking longer than expected. Please check your connection and try again.":c.includes("CORS")?"There's a connection issue with our servers. Please try again in a few moments.":c.includes("401")||c.includes("Unauthorized")?"Authentication failed. Please refresh the page and try again.":c.includes("404")||c.includes("Not Found")?"The requested information could not be found. Please try again later.":c.includes("429")||c.includes("Too Many Requests")?"Too many requests. Please wait a moment and try again.":c.includes("500")||c.includes("502")||c.includes("503")?"Our servers are experiencing issues. Please try again in a few moments.":c.includes("invalid")||c.includes("validation")?"The data format is incorrect. Please refresh the page and try again.":`An error occurred while ${b}. Please try again. If the problem persists, contact support.`}(c,"loading station data");if(console.log(`💬 User-friendly message: ${a}`),this.lastError={technical:c.message,userFriendly:a,timestamp:new Date().toISOString()},this.dataCache.has(b))return console.log("\uD83D\uDD04 Returning cached data due to error"),this.dataCache.get(b);return console.log("\uD83D\uDD04 Returning mock data as fallback"),this.getMockStations()}finally{this.isLoading=!1}}getMockStations(){return[{id:1,name:"Shell Melbourne CBD",lat:-37.8136,lng:144.9631,prices:{unleaded:185.9,premium:195.9,premium98:210.5,diesel:179.9,gas:95.2},address:"123 Collins Street, Melbourne",city:"Melbourne",source:"mock",lastUpdated:new Date().toISOString()},{id:2,name:"BP South Yarra",lat:-37.8387,lng:144.9924,prices:{unleaded:182.5,premium:192.5,premium98:207.8,diesel:176.8,gas:92.1},address:"456 Toorak Road, South Yarra",city:"South Yarra",source:"mock",lastUpdated:new Date().toISOString()},{id:3,name:"Caltex Richmond",lat:-37.8197,lng:145.0058,prices:{unleaded:188.9,premium:198.9,premium98:213.2,diesel:183.2,gas:97.5},address:"789 Swan Street, Richmond",city:"Richmond",source:"mock",lastUpdated:new Date().toISOString()}]}getLastError(){return this.lastError||null}clearError(){this.lastError=null}getStatus(){return{activeSource:this.activeSource,isLoading:this.isLoading,lastFetchTime:this.lastFetchTime,cacheValid:this.isCacheValid(),cacheSize:this.dataCache.size,availableSources:["local","baserow","airtable","mock"],lastError:this.lastError}}async testConnection(){try{switch(this.activeSource){case"local":try{return{connected:(await fetch("/data/stations.geojson",{method:"HEAD"})).ok,source:"local (GeoJSON)"}}catch{return{connected:!1,error:"Local data files not accessible"}}case"baserow":return await g.testConnection();case"airtable":throw Error("Airtable integration not implemented");case"mock":return{connected:!0,source:"mock"};default:throw Error(`Unknown data source: ${this.activeSource}`)}}catch(a){return console.error(`❌ Connection test failed for ${this.activeSource}:`,a),{connected:!1,error:a.message}}}}let k=new j;var l=c(405);let m=({onClose:a})=>{let[b,c]=(0,e.useState)({}),[f,g]=(0,e.useState)(""),[h,i]=(0,e.useState)(null),[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(!1),p=["Shell","BP","7-Eleven","Mobil","Coles Express","Caltex","Ampol","United","Liberty","Metro","Puma","Vibe","Independent"];(0,e.useEffect)(()=>{let a=localStorage.getItem("brandLogos");if(a)try{c(JSON.parse(a))}catch(a){console.error("Error loading brand logos:",a)}},[]);let q=a=>{localStorage.setItem("brandLogos",JSON.stringify(a)),c(a)},r=[...new Set([...p,...Object.keys(b)])].sort();return(0,d.jsx)("div",{className:"brand-logo-manager-overlay",children:(0,d.jsxs)("div",{className:"brand-logo-manager",children:[(0,d.jsxs)("div",{className:"manager-header",children:[(0,d.jsx)("h2",{children:"\uD83C\uDFA8 Brand Logo Manager"}),(0,d.jsx)("button",{onClick:a,className:"close-btn","aria-label":"Close",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"manager-content",children:[(0,d.jsxs)("div",{className:"upload-section",children:[(0,d.jsx)("h3",{children:"Upload Brand Logo"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"brand-select",children:"Select Brand"}),(0,d.jsxs)("div",{className:"brand-select-group",children:[(0,d.jsxs)("select",{id:"brand-select",value:f,onChange:a=>g(a.target.value),className:"brand-select",children:[(0,d.jsx)("option",{value:"",children:"Choose a brand..."}),r.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]}),(0,d.jsx)("button",{onClick:()=>o(!0),className:"add-brand-btn",title:"Add new brand",children:"+"})]})]}),n&&(0,d.jsxs)("div",{className:"add-brand-form",children:[(0,d.jsx)("input",{type:"text",placeholder:"Enter new brand name",value:l,onChange:a=>m(a.target.value),className:"brand-input"}),(0,d.jsxs)("div",{className:"add-brand-actions",children:[(0,d.jsx)("button",{onClick:()=>l.trim()?p.includes(l)||b[l]?void alert("This brand already exists"):void(g(l),o(!1),m("")):void alert("Please enter a brand name"),className:"btn-primary",children:"Add"}),(0,d.jsx)("button",{onClick:()=>{o(!1),m("")},className:"btn-secondary",children:"Cancel"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"logo-upload",children:"Upload Logo Image"}),(0,d.jsx)("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files[0];if(b){if(!b.type.startsWith("image/"))return void alert("Please select an image file (PNG, JPG, SVG)");if(b.size>2097152)return void alert("File size must be less than 2MB");i(b);let a=new FileReader;a.onload=a=>{k(a.target.result)},a.readAsDataURL(b)}},className:"file-input"}),(0,d.jsx)("p",{className:"help-text",children:"Recommended: PNG or SVG, transparent background, max 2MB"})]}),j&&(0,d.jsxs)("div",{className:"preview-section",children:[(0,d.jsx)("h4",{children:"Preview"}),(0,d.jsx)("div",{className:"preview-box",children:(0,d.jsx)("img",{src:j,alt:"Logo preview",className:"preview-image"})})]}),(0,d.jsx)("button",{onClick:()=>f?j?void(q({...b,[f]:j}),i(null),k(""),g(""),alert(`Logo uploaded successfully for ${f}!`)):void alert("Please select an image file"):void alert("Please select a brand"),className:"upload-btn",disabled:!f||!j,children:"Upload Logo"})]}),(0,d.jsxs)("div",{className:"existing-logos-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsxs)("h3",{children:["Uploaded Logos (",Object.keys(b).length,")"]}),Object.keys(b).length>0&&(0,d.jsx)("button",{onClick:()=>{let a=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),c=URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download="brand-logos-backup.json",d.click(),URL.revokeObjectURL(c)},className:"export-btn",children:"\uD83D\uDCBE Export Backup"})]}),0===Object.keys(b).length?(0,d.jsxs)("div",{className:"empty-state",children:[(0,d.jsx)("p",{children:"No logos uploaded yet"}),(0,d.jsx)("p",{className:"help-text",children:"Upload your first brand logo above"})]}):(0,d.jsx)("div",{className:"logos-grid",children:Object.entries(b).map(([a,c])=>(0,d.jsxs)("div",{className:"logo-card",children:[(0,d.jsx)("div",{className:"logo-card-image",children:(0,d.jsx)("img",{src:c,alt:`${a} logo`})}),(0,d.jsxs)("div",{className:"logo-card-info",children:[(0,d.jsx)("h4",{children:a}),(0,d.jsx)("button",{onClick:()=>(a=>{if(window.confirm(`Delete logo for ${a}?`)){let c={...b};delete c[a],q(c)}})(a),className:"delete-btn","aria-label":`Delete ${a} logo`,children:"\uD83D\uDDD1️"})]})]},a))})]})]}),(0,d.jsx)("div",{className:"manager-footer",children:(0,d.jsx)("p",{className:"info-text",children:"ℹ️ Logos are stored in your browser's local storage. Export regularly for backup."})})]})})},n=()=>{let[a,b]=(0,e.useState)([]),[c,f]=(0,e.useState)(!0),[g,h]=(0,e.useState)(""),[i,j]=(0,e.useState)("all"),[n,o]=(0,e.useState)("all"),[p,q]=(0,e.useState)("all"),[r,s]=(0,e.useState)("all"),[t,u]=(0,e.useState)(1),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)({});(0,e.useEffect)(()=>{let a=()=>{let a=localStorage.getItem("brandLogos");if(a)try{y(JSON.parse(a))}catch(a){console.error("Error loading brand logos:",a)}};a();let b=b=>{"brandLogos"===b.key&&a()};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);let z=(0,e.useCallback)(a=>{let b=a.split("\n"),c=b[0].split(",").map(a=>a.trim().replace(/"/g,""));return b.slice(1).filter(a=>a.trim()).map((a,b)=>{let d=a.split(",").map(a=>a.trim().replace(/"/g,"")),e={};c.forEach((a,b)=>{e[a]=d[b]||""});let f=[];return Object.keys(e).forEach(a=>{if(a.toLowerCase().includes("price")&&e[a]){let b=a.toLowerCase().includes("unleaded")?"Unleaded":a.toLowerCase().includes("premium")?"Premium":a.toLowerCase().includes("diesel")?"Diesel":a.toLowerCase().includes("lpg")?"LPG":"Fuel",c=parseFloat(e[a]);!isNaN(c)&&c>0&&f.push({type:b,price:c})}}),{id:b+1,name:e["Station Name"]||e.name||"",address:e.Address||e.address||"",city:e.City||e.city||"",postalCode:e["Postal Code"]||e.postalCode||"",region:e.Region||e.region||"",brand:e.brand||e.Brand||"",latitude:parseFloat(e.Latitude||e.lat||0),longitude:parseFloat(e.Longitude||e.lng||0),category:e.Category||e.category||"",locationDetails:e["Location Details"]||e.locationDetails||"",lastUpdated:e["Last Updated"]||new Date().toISOString(),fuelPrices:f.length>0?f:[{type:"Unleaded",price:0},{type:"Premium",price:0},{type:"Diesel",price:0}]}}).filter(a=>a.name)},[]),A=(0,e.useCallback)(async()=>{try{let a=await fetch("/export-Petrol-Stations-Grid-view.csv");if(!a.ok)return null;let b=await a.text();return z(b)}catch(a){return console.log("CSV not available, using Baserow API"),null}},[z]);(0,e.useEffect)(()=>{(async()=>{try{f(!0);let a=await A();if(a&&a.length>0)return void b(a);let c=await k.fetchStations();b(c)}catch(a){console.error("Error loading stations:",a)}finally{f(!1)}})()},[A]);let B=(0,e.useMemo)(()=>["all",...[...new Set(a.map(a=>a.brand).filter(Boolean))].sort()],[a]),C=(0,e.useMemo)(()=>["all",...[...new Set(a.map(a=>a.region).filter(Boolean))].sort()],[a]),D=(0,e.useMemo)(()=>["all",...[...new Set(a.map(a=>a.city).filter(Boolean))].sort()],[a]),E=(0,e.useMemo)(()=>["all",...[...new Set(a.flatMap(a=>Array.isArray(a.fuelPrices)?a.fuelPrices.filter(a=>a&&"object"==typeof a&&a.type).map(a=>a.type):[]).filter(Boolean))].sort()],[a]),F=(0,e.useMemo)(()=>{let b=[...a];if(g){let a=g.toLowerCase();b=b.filter(b=>b.name?.toLowerCase().includes(a)||b.address?.toLowerCase().includes(a)||b.city?.toLowerCase().includes(a)||b.brand?.toLowerCase().includes(a)||b.postalCode?.includes(a)),(0,l.Ar)(g,b.length)}return"all"!==i&&(b=b.filter(a=>a.brand===i),(0,l.qh)("brand",i)),"all"!==n&&(b=b.filter(a=>a.region===n),(0,l.qh)("region",n)),"all"!==p&&(b=b.filter(a=>a.city===p),(0,l.qh)("suburb",p)),"all"!==r&&(b=b.filter(a=>Array.isArray(a.fuelPrices)&&a.fuelPrices.some(a=>a&&a.type===r)),(0,l.qh)("fuelType",r)),b},[a,g,i,n,p,r]),G=Math.ceil(F.length/12),H=F.slice((t-1)*12,12*t),I=a=>a&&0!==a?`$${a.toFixed(2)}`:"N/A";return c?(0,d.jsxs)("div",{className:"station-cards-loading",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"Loading stations..."})]}):(0,d.jsxs)("div",{className:"station-cards-container",children:[(0,d.jsxs)("div",{className:"cards-header",children:[(0,d.jsx)("h2",{children:"Melbourne Petrol Stations"}),(0,d.jsxs)("p",{className:"cards-subtitle",children:["Find the best fuel prices near you • ",F.length," stations available"]}),(0,d.jsx)("button",{onClick:()=>w(!0),className:"admin-btn",title:"Manage Brand Logos",children:"\uD83C\uDFA8 Manage Logos"})]}),v&&(0,d.jsx)(m,{onClose:()=>{w(!1);let a=localStorage.getItem("brandLogos");if(a)try{y(JSON.parse(a))}catch(a){console.error("Error reloading brand logos:",a)}}}),(0,d.jsxs)("div",{className:"cards-filters",children:[(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"search",children:"\uD83D\uDD0D Search Stations"}),(0,d.jsx)("input",{id:"search",name:"search",type:"search",placeholder:"Search by name, address, suburb...",value:g,onChange:a=>h(a.target.value),className:"search-input"})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"brand-filter",children:"\uD83C\uDFEA Brand"}),(0,d.jsx)("select",{id:"brand-filter",name:"brand-filter",value:i,onChange:a=>j(a.target.value),className:"filter-select",children:B.map(a=>(0,d.jsx)("option",{value:a,children:"all"===a?"All Brands":a},a))})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"suburb-filter",children:"\uD83C\uDFD8️ Suburb"}),(0,d.jsx)("select",{id:"suburb-filter",name:"suburb-filter",value:p,onChange:a=>q(a.target.value),className:"filter-select",children:D.map(a=>(0,d.jsx)("option",{value:a,children:"all"===a?"All Suburbs":a},a))})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"fuel-filter",children:"⛽ Fuel Type"}),(0,d.jsx)("select",{id:"fuel-filter",name:"fuel-filter",value:r,onChange:a=>s(a.target.value),className:"filter-select",children:E.map(a=>(0,d.jsx)("option",{value:a,children:"all"===a?"All Fuel Types":a},a))})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"region-filter",children:"\uD83D\uDCCD Region"}),(0,d.jsx)("select",{id:"region-filter",name:"region-filter",value:n,onChange:a=>o(a.target.value),className:"filter-select",children:C.map(a=>(0,d.jsx)("option",{value:a,children:"all"===a?"All Regions":a},a))})]})]}),H.length>0?(0,d.jsx)("div",{className:"cards-grid",children:H.map(a=>{let b=Array.isArray(a.fuelPrices)?a.fuelPrices.find(a=>a&&a.type&&a.type.toLowerCase().includes("unleaded")):null,c=Array.isArray(a.fuelPrices)?a.fuelPrices.find(a=>a&&a.type&&a.type.toLowerCase().includes("diesel")):null;return(0,d.jsxs)("div",{className:"station-card",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("img",{src:(a=>a&&x[a]?x[a]:"/images/brands/default-logo.svg")(a.brand),alt:`${a.brand||"Station"} logo`,className:"brand-logo",onError:a=>{a.target.src="/images/brands/default-logo.svg"}}),(0,d.jsx)("div",{className:"brand-badge",children:a.brand||"Independent"})]}),(0,d.jsxs)("div",{className:"card-content",children:[(0,d.jsx)("h3",{className:"station-name",children:a.name}),(0,d.jsxs)("p",{className:"station-address",children:[a.address&&`${a.address}, `,a.city&&`${a.city} `,a.postalCode&&a.postalCode]}),(0,d.jsxs)("div",{className:"fuel-prices",children:[(0,d.jsxs)("div",{className:`fuel-price-item ${b?"unleaded":""}`,children:[(0,d.jsxs)("div",{className:"fuel-type",children:[(0,d.jsx)("div",{className:"fuel-icon unleaded",children:"U"}),"Unleaded"]}),(0,d.jsx)("div",{className:"price",children:b&&b.price?I(b.price):"N/A"})]}),(0,d.jsxs)("div",{className:`fuel-price-item ${c?"diesel":""}`,children:[(0,d.jsxs)("div",{className:"fuel-type",children:[(0,d.jsx)("div",{className:"fuel-icon diesel",children:"D"}),"Diesel"]}),(0,d.jsx)("div",{className:"price",children:c&&c.price?I(c.price):"N/A"})]})]}),(0,d.jsxs)("div",{className:"card-actions",children:[a.latitude&&a.longitude?(0,d.jsx)("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${a.latitude},${a.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"action-btn",children:"\uD83E\uDDED Directions"}):(0,d.jsx)("button",{className:"action-btn",disabled:!0,children:"\uD83D\uDCCD No Location"}),(0,d.jsx)("button",{className:"action-btn secondary",children:"ℹ️ More Info"})]})]})]},a.id)})}):(0,d.jsxs)("div",{className:"no-results",children:[(0,d.jsx)("h3",{children:"No stations found"}),(0,d.jsx)("p",{children:"Try adjusting your search criteria or filters"})]}),G>1&&(0,d.jsxs)("div",{className:"cards-pagination",children:[(0,d.jsx)("button",{onClick:()=>u(a=>Math.max(1,a-1)),disabled:1===t,className:"page-btn",children:"← Previous"}),(0,d.jsxs)("span",{className:"page-info",children:["Page ",t," of ",G]}),(0,d.jsx)("button",{onClick:()=>u(a=>Math.min(G,a+1)),disabled:t===G,className:"page-btn",children:"Next →"})]}),(0,d.jsx)("div",{className:"cards-footer",children:(0,d.jsxs)("p",{children:["Showing ",(t-1)*12+1,"-",Math.min(12*t,F.length)," of ",F.length," stations",(g||"all"!==i||"all"!==n||"all"!==p||"all"!==r)&&` (filtered from ${a.length} total)`]})})]})}},4075:a=>{"use strict";a.exports=require("zlib")},4233:(a,b,c)=>{a.exports=c(2071)},5035:a=>{"use strict";a.exports=import("node-fetch")},5399:(a,b,c)=>{"use strict";c.d(b,{nF:()=>d}),c(8732),c(2015),c(1990);let d=a=>({"@context":"https://schema.org","@type":"ItemList",name:"Melbourne Petrol Station Prices",description:"Real-time fuel prices from petrol stations across Melbourne",numberOfItems:a.length,itemListElement:a.slice(0,10).map((a,b)=>({"@type":"ListItem",position:b+1,item:(a=>({"@context":"https://schema.org","@type":"GasStation",name:a.name,address:{"@type":"PostalAddress",streetAddress:a.address,addressLocality:a.city,addressRegion:"VIC",postalCode:a.postalCode,addressCountry:"AU"},geo:{"@type":"GeoCoordinates",latitude:a.latitude,longitude:a.longitude},telephone:a.phone,openingHoursSpecification:a.hours?{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],opens:"00:00",closes:"23:59"}:void 0,priceRange:a.fuelPrices?`$${Math.min(...a.fuelPrices.map(a=>parseFloat(a.price||0)))} - $${Math.max(...a.fuelPrices.map(a=>parseFloat(a.price||0)))}`:void 0}))(a)}))})},5705:(a,b,c)=>{"use strict";function d(a,b){if(void 0===b&&(b={}),b.onlyHashChange)return void a();let c=document.documentElement;c.dataset.scrollBehavior;let d=c.style.scrollBehavior;c.style.scrollBehavior="auto",b.dontForceLayout||c.getClientRects(),a(),c.style.scrollBehavior=d}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"disableSmoothScrollDuringRouteTransition",{enumerable:!0,get:function(){return d}}),c(2314)},5822:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(8732),e=c(2015);let f=({stations:a=[],onStationClick:b,selectedStation:c,height:f=500})=>{let[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(!1),k=process.env.REACT_APP_MAPBOX_TOKEN;(0,e.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{h({latitude:a.coords.latitude,longitude:a.coords.longitude})},a=>{console.warn("Geolocation error:",a)})},[]);let l=a=>{if(!a.fuelPrices||0===a.fuelPrices.length)return"#6B7280";let b=a.fuelPrices.reduce((a,b)=>a+parseFloat(b.price||0),0)/a.fuelPrices.length;return b<1.8?"#10B981":b<2?"#F59E0B":"#EF4444"},m=a.filter(a=>a.latitude&&a.longitude),n=m.length>0?{lat:m.reduce((a,b)=>a+b.latitude,0)/m.length,lng:m.reduce((a,b)=>a+b.longitude,0)/m.length}:{lat:-37.8136,lng:144.9631};return k?(0,d.jsxs)("div",{className:"station-map-container",style:{height:f},children:[(0,d.jsx)("div",{className:"map-static-view",children:(0,d.jsx)("img",{src:(()=>{let a=m.slice(0,50).map(a=>{let b=l(a).replace("#","");return`pin-s+${b}(${a.longitude},${a.latitude})`}).join(","),b=g?`,pin-l-marker+3B82F6(${g.longitude},${g.latitude})`:"";return`https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/${a}${b}/${n.lng},${n.lat},11/800x500@2x?access_token=${k}`})(),alt:"Petrol stations map",className:"static-map-image",onLoad:()=>j(!0),onError:a=>{console.error("Map loading error"),a.target.style.display="none"}})}),(0,d.jsxs)("div",{className:"map-station-list",children:[(0,d.jsx)("h3",{children:"\uD83D\uDCCD Nearby Stations"}),(0,d.jsx)("div",{className:"station-list-items",children:m.slice(0,10).map((a,e)=>(0,d.jsxs)("div",{className:`station-list-item ${c?.id===a.id?"selected":""}`,onClick:()=>{b&&b(a)},children:[(0,d.jsx)("div",{className:"station-color-indicator",style:{background:l(a)}}),(0,d.jsxs)("div",{className:"station-info",children:[(0,d.jsx)("strong",{children:a.name}),(0,d.jsx)("small",{children:a.address})]})]},a.id||e))})]}),(0,d.jsxs)("div",{className:"map-legend",children:[(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("span",{className:"legend-color",style:{background:"#10B981"}}),"Low Price"]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("span",{className:"legend-color",style:{background:"#F59E0B"}}),"Medium Price"]}),(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("span",{className:"legend-color",style:{background:"#EF4444"}}),"High Price"]})]}),!i&&(0,d.jsxs)("div",{className:"map-loading",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:"Loading map..."})]}),(0,d.jsxs)("div",{className:"map-info-banner",children:[(0,d.jsxs)("p",{children:["\uD83D\uDCCD Showing ",m.slice(0,50).length," stations on map"]}),m.length>50&&(0,d.jsx)("small",{children:"Limited to 50 stations for performance"})]})]}):(0,d.jsx)("div",{className:"station-map-container",style:{height:f},children:(0,d.jsxs)("div",{className:"map-error",children:[(0,d.jsx)("p",{children:"⚠️ Mapbox token not configured"}),(0,d.jsx)("p",{children:"Please add REACT_APP_MAPBOX_TOKEN to your .env.local file"})]})})}},6060:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6385:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"setAttributesFromProps",{enumerable:!0,get:function(){return f}});let c={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"},d=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"];function e(a){return["async","defer","noModule"].includes(a)}function f(a,b){for(let[f,g]of Object.entries(b)){if(!b.hasOwnProperty(f)||d.includes(f)||void 0===g)continue;let h=c[f]||f.toLowerCase();"SCRIPT"===a.tagName&&e(h)?a[h]=!!g:a.setAttribute(h,String(g)),(!1===g||"SCRIPT"===a.tagName&&e(h)&&(!g||"false"===g))&&(a.setAttribute(h,""),a.removeAttribute(h))}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},6472:a=>{"use strict";a.exports=require("@opentelemetry/api")},7485:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"detectDomainLocale",{enumerable:!0,get:function(){return c}});let c=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c]};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},7746:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}}),c(7020);let d=c(8732);c(2015);let e=c(2071);function f(a){function b(b){return(0,d.jsx)(a,{router:(0,e.useRouter)(),...b})}return b.getInitialProps=a.getInitialProps,b.origGetInitialProps=a.origGetInitialProps,b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},7910:a=>{"use strict";a.exports=require("stream")},8113:(a,b,c)=>{"use strict";c.d(b,{A:()=>i});var d=c(8732);c(2015);var e=c(9918),f=c.n(e),g=c(6220);let h={"/":[{label:"Home",path:"/",icon:"\uD83C\uDFE0",isActive:!0}],"/directory":[{label:"Home",path:"/",icon:"\uD83C\uDFE0"},{label:"Station Directory",path:"/directory",icon:"\uD83D\uDDFA️",isActive:!0}],"/blog":[{label:"Home",path:"/",icon:"\uD83C\uDFE0"},{label:"Blog",path:"/blog",icon:"\uD83D\uDCDD",isActive:!0}],"/faq":[{label:"Home",path:"/",icon:"\uD83C\uDFE0"},{label:"FAQ",path:"/faq",icon:"❓",isActive:!0}],"/about":[{label:"Home",path:"/",icon:"\uD83C\uDFE0"},{label:"About",path:"/about",icon:"ℹ️",isActive:!0}]},i=({customCrumbs:a})=>{let b=(0,g.usePathname)(),c=a||h[b]||[{label:"Home",path:"/",icon:"\uD83C\uDFE0"}],e={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:c.map((a,b)=>({"@type":"ListItem",position:b+1,name:a.label,item:`https://petrolpricesnearme.com.au${a.path}`}))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}),(0,d.jsx)("nav",{className:"breadcrumbs","aria-label":"Breadcrumb navigation",children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("ol",{className:"breadcrumb-list",children:c.map((a,b)=>(0,d.jsxs)("li",{className:`breadcrumb-item ${a.isActive?"active":""}`,children:[a.isActive?(0,d.jsxs)("span",{"aria-current":"page",children:[a.icon&&(0,d.jsx)("span",{className:"breadcrumb-icon","aria-hidden":"true",children:a.icon}),a.label]}):(0,d.jsxs)(f(),{href:a.path,children:[a.icon&&(0,d.jsx)("span",{className:"breadcrumb-icon","aria-hidden":"true",children:a.icon}),a.label]}),b<c.length-1&&(0,d.jsx)("span",{className:"breadcrumb-separator","aria-hidden":"true",children:"›"})]},b))})})})]})}},8550:(a,b,c)=>{(()=>{var b={154:(a,b,c)=>{var d=c(781),e=["write","end","destroy"],f=["resume","pause"],g=["data","close"],h=Array.prototype.slice;function i(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c)}a.exports=function(a,b){var c=new d,j=!1;return i(e,function(b){c[b]=function(){return a[b].apply(a,arguments)}}),i(f,function(a){c[a]=function(){c.emit(a);var d=b[a];if(d)return d.apply(b,arguments);b.emit(a)}}),i(g,function(a){b.on(a,function(){var b=h.call(arguments);b.unshift(a),c.emit.apply(c,b)})}),b.on("end",function(){if(!j){j=!0;var a=h.call(arguments);a.unshift("end"),c.emit.apply(c,a)}}),a.on("drain",function(){c.emit("drain")}),a.on("error",k),b.on("error",k),c.writable=a.writable,c.readable=b.readable,c;function k(a){c.emit("error",a)}}},349:(a,b,c)=>{"use strict";let d=c(147),e=c(781),f=c(796),g=c(154),h=c(530),i=a=>Object.assign({level:9},a);a.exports=(a,b)=>a?h(f.gzip)(a,i(b)).then(a=>a.length).catch(a=>0):Promise.resolve(0),a.exports.sync=(a,b)=>f.gzipSync(a,i(b)).length,a.exports.stream=a=>{let b=new e.PassThrough,c=new e.PassThrough,d=g(b,c),h=0,j=f.createGzip(i(a)).on("data",a=>{h+=a.length}).on("error",()=>{d.gzipSize=0}).on("end",()=>{d.gzipSize=h,d.emit("gzip-size",h),c.end()});return b.pipe(j),b.pipe(c,{end:!1}),d},a.exports.file=(b,c)=>new Promise((e,f)=>{let g=d.createReadStream(b);g.on("error",f);let h=g.pipe(a.exports.stream(c));h.on("error",f),h.on("gzip-size",e)}),a.exports.fileSync=(b,c)=>a.exports.sync(d.readFileSync(b),c)},530:a=>{"use strict";let b=(a,b)=>function(...c){return new b.promiseModule((d,e)=>{b.multiArgs?c.push((...a)=>{b.errorFirst?a[0]?e(a):(a.shift(),d(a)):d(a)}):b.errorFirst?c.push((a,b)=>{a?e(a):d(b)}):c.push(d),a.apply(this,c)})};a.exports=(a,c)=>{let d;c=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},c);let e=typeof a;if(null===a||"object"!==e&&"function"!==e)throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===a?"null":e}\``);let f=a=>{let b=b=>"string"==typeof b?a===b:b.test(a);return c.include?c.include.some(b):!c.exclude.some(b)};for(let g in d="function"===e?function(...d){return c.excludeMain?a(...d):b(a,c).apply(this,d)}:Object.create(Object.getPrototypeOf(a)),a){let e=a[g];d[g]="function"==typeof e&&f(g)?b(e,c):e}return d}},147:a=>{"use strict";a.exports=c(9021)},781:a=>{"use strict";a.exports=c(7910)},796:a=>{"use strict";a.exports=c(4075)}},d={};function e(a){var c=d[a];if(void 0!==c)return c.exports;var f=d[a]={exports:{}},g=!0;try{b[a](f,f.exports,e),g=!1}finally{g&&delete d[a]}return f.exports}e.ab=__dirname+"/",a.exports=e(349)})()},8671:(a,b,c)=>{"use strict";function d(a,b){return a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeLocale",{enumerable:!0,get:function(){return d}}),c(9993),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},8747:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createKey:function(){return R},default:function(){return U},matchesMiddleware:function(){return J}});let d=c(7020),e=c(3147),f=c(5047),g=c(2309),h=c(9561),i=e._(c(1644)),j=c(5450),k=c(7655),l=d._(c(1336)),m=c(6373),n=c(2146),o=c(3700),p=c(820),q=c(7879),r=c(4747);c(7485);let s=c(9993),t=c(8196),u=c(8671),v=c(9942),w=c(1431),x=c(2858),y=c(4890),z=c(1918),A=c(50),B=c(8053),C=c(9974),D=c(7540);c(9202);let E=c(7193),F=c(4972),G=c(5705),H=c(2072);function I(){return Object.assign(Object.defineProperty(Error("Route Cancelled"),"__NEXT_ERROR_CODE",{value:"E315",enumerable:!1,configurable:!0}),{cancelled:!0})}async function J(a){let b=await Promise.resolve(a.router.pageLoader.getMiddleware());if(!b)return!1;let{pathname:c}=(0,s.parsePath)(a.asPath),d=(0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,e=(0,w.addBasePath)((0,t.addLocale)(d,a.locale));return b.some(a=>new RegExp(a.regexp).test(e))}function K(a){let b=(0,m.getLocationOrigin)();return a.startsWith(b)?a.substring(b.length):a}function L(a,b,c){let[d,e]=(0,y.resolveHref)(a,b,!0),f=(0,m.getLocationOrigin)(),g=d.startsWith(f),h=e&&e.startsWith(f);d=K(d),e=e?K(e):e;let i=g?d:(0,w.addBasePath)(d),j=c?K((0,y.resolveHref)(a,c)):e||d;return{url:i,as:h?j:(0,w.addBasePath)(j)}}function M(a,b){let c=(0,f.removeTrailingSlash)((0,j.denormalizePagePath)(a));return"/404"===c||"/_error"===c?a:(b.includes(c)||b.some(b=>{if((0,n.isDynamicRoute)(b)&&(0,q.getRouteRegex)(b).re.test(c))return a=b,!0}),(0,f.removeTrailingSlash)(a))}async function N(a){if(!await J(a)||!a.fetchData)return null;let b=await a.fetchData(),c=await function(a,b,c){let d={basePath:c.router.basePath,i18n:{locales:c.router.locales},trailingSlash:!1},e=b.headers.get("x-nextjs-rewrite"),h=e||b.headers.get("x-nextjs-matched-path"),i=b.headers.get(H.MATCHED_PATH_HEADER);if(!i||h||i.includes("__next_data_catchall")||i.includes("/_error")||i.includes("/404")||(h=i),h){if(h.startsWith("/")){let b=(0,o.parseRelativeUrl)(h),i=(0,A.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),j=(0,f.removeTrailingSlash)(i.pathname);return Promise.all([c.router.pageLoader.getPageList(),(0,g.getClientBuildManifest)()]).then(f=>{let[g,{__rewrites:h}]=f,l=(0,t.addLocale)(i.pathname,i.locale);if((0,n.isDynamicRoute)(l)||!e&&g.includes((0,k.normalizeLocalePath)((0,v.removeBasePath)(l),c.router.locales).pathname)){let c=(0,A.getNextPathnameInfo)((0,o.parseRelativeUrl)(a).pathname,{nextConfig:d,parseData:!0});b.pathname=l=(0,w.addBasePath)(c.pathname)}if(!g.includes(j)){let a=M(j,g);a!==j&&(j=a)}let m=g.includes(j)?j:M((0,k.normalizeLocalePath)((0,v.removeBasePath)(b.pathname),c.router.locales).pathname,g);if((0,n.isDynamicRoute)(m)){let a=(0,p.getRouteMatcher)((0,q.getRouteRegex)(m))(l);Object.assign(b.query,a||{})}return{type:"rewrite",parsedAs:b,resolvedHref:m}})}let b=(0,s.parsePath)(a);return Promise.resolve({type:"redirect-external",destination:""+(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""})+b.query+b.hash})}let j=b.headers.get("x-nextjs-redirect");if(j){if(j.startsWith("/")){let a=(0,s.parsePath)(j),b=(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(a.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-internal",newAs:""+b+a.query+a.hash,newUrl:""+b+a.query+a.hash})}return Promise.resolve({type:"redirect-external",destination:j})}return Promise.resolve({type:"next"})}(b.dataHref,b.response,a);return{dataHref:b.dataHref,json:b.json,response:b.response,text:b.text,cacheKey:b.cacheKey,effect:c}}let O=Symbol("SSG_DATA_NOT_FOUND");function P(a){try{return JSON.parse(a)}catch(a){return null}}function Q(a){let{dataHref:b,inflightCache:c,isPrefetch:d,hasMiddleware:e,isServerRender:f,parseJSON:h,persistCache:i,isBackground:j,unstable_skipClientCache:k}=a,{href:l}=new URL(b,window.location.href),m=a=>{var j;return(function a(b,c,d){return fetch(b,{credentials:"same-origin",method:d.method||"GET",headers:Object.assign({},d.headers,{"x-nextjs-data":"1"})}).then(e=>!e.ok&&c>1&&e.status>=500?a(b,c-1,d):e)})(b,f?3:1,{headers:Object.assign({},d?{purpose:"prefetch"}:{},d&&e?{"x-middleware-prefetch":"1"}:{},{}),method:null!=(j=null==a?void 0:a.method)?j:"GET"}).then(c=>c.ok&&(null==a?void 0:a.method)==="HEAD"?{dataHref:b,response:c,text:"",json:{},cacheKey:l}:c.text().then(a=>{if(!c.ok){if(e&&[301,302,307,308].includes(c.status))return{dataHref:b,response:c,text:a,json:{},cacheKey:l};if(404===c.status){var d;if(null==(d=P(a))?void 0:d.notFound)return{dataHref:b,json:{notFound:O},response:c,text:a,cacheKey:l}}let h=Object.defineProperty(Error("Failed to load static props"),"__NEXT_ERROR_CODE",{value:"E124",enumerable:!1,configurable:!0});throw f||(0,g.markAssetError)(h),h}return{dataHref:b,json:h?P(a):null,response:c,text:a,cacheKey:l}})).then(a=>(i&&"no-cache"!==a.response.headers.get("x-middleware-cache")||delete c[l],a)).catch(a=>{throw k||delete c[l],("Failed to fetch"===a.message||"NetworkError when attempting to fetch resource."===a.message||"Load failed"===a.message)&&(0,g.markAssetError)(a),a})};return k&&i?m({}).then(a=>("no-cache"!==a.response.headers.get("x-middleware-cache")&&(c[l]=Promise.resolve(a)),a)):void 0!==c[l]?c[l]:c[l]=m(j?{method:"HEAD"}:{})}function R(){return Math.random().toString(36).slice(2,10)}function S(a){let{url:b,router:c}=a;if(b===(0,w.addBasePath)((0,t.addLocale)(c.asPath,c.locale)))throw Object.defineProperty(Error("Invariant: attempted to hard navigate to the same URL "+b+" "+location.href),"__NEXT_ERROR_CODE",{value:"E282",enumerable:!1,configurable:!0});window.location.href=b}let T=a=>{let{route:b,router:c}=a,d=!1,e=c.clc=()=>{d=!0};return()=>{if(d){let a=Object.defineProperty(Error('Abort fetching component for route: "'+b+'"'),"__NEXT_ERROR_CODE",{value:"E483",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}e===c.clc&&(c.clc=null)}};class U{reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=L(this,a,b),this.change("pushState",a,b,c)}replace(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=L(this,a,b),this.change("replaceState",a,b,c)}async _bfl(a,b,d,e){{if(!this._bfl_s&&!this._bfl_d){let b,f,{BloomFilter:h}=c(8782);try{({__routerFilterStatic:b,__routerFilterDynamic:f}=await (0,g.getClientBuildManifest)())}catch(b){if(console.error(b),e)return!0;return S({url:(0,w.addBasePath)((0,t.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}(null==b?void 0:b.numHashes)&&(this._bfl_s=new h(b.numItems,b.errorRate),this._bfl_s.import(b)),(null==f?void 0:f.numHashes)&&(this._bfl_d=new h(f.numItems,f.errorRate),this._bfl_d.import(f))}let k=!1,l=!1;for(let{as:c,allowMatchCurrent:g}of[{as:a},{as:b}])if(c){let b=(0,f.removeTrailingSlash)(new URL(c,"http://n").pathname),m=(0,w.addBasePath)((0,t.addLocale)(b,d||this.locale));if(g||b!==(0,f.removeTrailingSlash)(new URL(this.asPath,"http://n").pathname)){var h,i,j;for(let a of(k=k||!!(null==(h=this._bfl_s)?void 0:h.contains(b))||!!(null==(i=this._bfl_s)?void 0:i.contains(m)),[b,m])){let b=a.split("/");for(let a=0;!l&&a<b.length+1;a++){let c=b.slice(0,a).join("/");if(c&&(null==(j=this._bfl_d)?void 0:j.contains(c))){l=!0;break}}}if(k||l){if(e)return!0;return S({url:(0,w.addBasePath)((0,t.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}}}}return!1}async change(a,b,c,d,e){var j,k,l,y,z,A,B,G,H;let K,N;if(!(0,D.isLocalURL)(b))return S({url:b,router:this}),!1;let P=1===d._h;P||d.shallow||await this._bfl(c,void 0,d.locale);let Q=P||d._shouldResolveHref||(0,s.parsePath)(b).pathname===(0,s.parsePath)(c).pathname,R={...this.state},T=!0!==this.isReady;this.isReady=!0;let V=this.isSsr;if(P||(this.isSsr=!1),P&&this.clc)return!1;let W=R.locale;m.ST&&performance.mark("routeChange");let{shallow:X=!1,scroll:Y=!0}=d,Z={shallow:X};this._inFlightRoute&&this.clc&&(V||U.events.emit("routeChangeError",I(),this._inFlightRoute,Z),this.clc(),this.clc=null),c=(0,w.addBasePath)((0,t.addLocale)((0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,d.locale,this.defaultLocale));let $=(0,u.removeLocale)((0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,R.locale);this._inFlightRoute=c;let _=W!==R.locale;if(!P&&this.onlyAHashChange($)&&!_){R.asPath=$,U.events.emit("hashChangeStart",c,Z),this.changeState(a,b,c,{...d,scroll:!1}),Y&&this.scrollToHash($);try{await this.set(R,this.components[R.route],null)}catch(a){throw(0,i.default)(a)&&a.cancelled&&U.events.emit("routeChangeError",a,$,Z),a}return U.events.emit("hashChangeComplete",c,Z),!0}let aa=(0,o.parseRelativeUrl)(b),{pathname:ab,query:ac}=aa;try{[K,{__rewrites:N}]=await Promise.all([this.pageLoader.getPageList(),(0,g.getClientBuildManifest)(),this.pageLoader.getMiddleware()])}catch(a){return S({url:c,router:this}),!1}this.urlIsNew($)||_||(a="replaceState");let ad=c;ab=ab?(0,f.removeTrailingSlash)((0,v.removeBasePath)(ab)):ab;let ae=(0,f.removeTrailingSlash)(ab),af=c.startsWith("/")&&(0,o.parseRelativeUrl)(c).pathname;if(null==(j=this.components[ab])?void 0:j.__appRouter)return S({url:c,router:this}),new Promise(()=>{});let ag=!!(af&&ae!==af&&(!(0,n.isDynamicRoute)(ae)||!(0,p.getRouteMatcher)((0,q.getRouteRegex)(ae))(af))),ah=!d.shallow&&await J({asPath:c,locale:R.locale,router:this});if(P&&ah&&(Q=!1),Q&&"/_error"!==ab&&(d._shouldResolveHref=!0,aa.pathname=M(ab,K),aa.pathname!==ab&&(ab=aa.pathname,aa.pathname=(0,w.addBasePath)(ab),ah||(b=(0,r.formatWithValidation)(aa)))),!(0,D.isLocalURL)(c))return S({url:c,router:this}),!1;ad=(0,u.removeLocale)((0,v.removeBasePath)(ad),R.locale),ae=(0,f.removeTrailingSlash)(ab);let ai=!1;if((0,n.isDynamicRoute)(ae)){let a=(0,o.parseRelativeUrl)(ad),d=a.pathname,e=(0,q.getRouteRegex)(ae);ai=(0,p.getRouteMatcher)(e)(d);let f=ae===d,g=f?(0,F.interpolateAs)(ae,d,ac):{};if(ai&&(!f||g.result))f?c=(0,r.formatWithValidation)(Object.assign({},a,{pathname:g.result,query:(0,E.omit)(ac,g.params)})):Object.assign(ac,ai);else{let a=Object.keys(e.groups).filter(a=>!ac[a]&&!e.groups[a].optional);if(a.length>0&&!ah)throw Object.defineProperty(Error((f?"The provided `href` ("+b+") value is missing query values ("+a.join(", ")+") to be interpolated properly. ":"The provided `as` value ("+d+") is incompatible with the `href` value ("+ae+"). ")+"Read more: https://nextjs.org/docs/messages/"+(f?"href-interpolation-failed":"incompatible-href-as")),"__NEXT_ERROR_CODE",{value:"E344",enumerable:!1,configurable:!0})}}P||U.events.emit("routeChangeStart",c,Z);let aj="/404"===this.pathname||"/_error"===this.pathname;try{let f=await this.getRouteInfo({route:ae,pathname:ab,query:ac,as:c,resolvedAs:ad,routeProps:Z,locale:R.locale,isPreview:R.isPreview,hasMiddleware:ah,unstable_skipClientCache:d.unstable_skipClientCache,isQueryUpdating:P&&!this.isFallback,isMiddlewareRewrite:ag});if(P||d.shallow||await this._bfl(c,"resolvedAs"in f?f.resolvedAs:void 0,R.locale),"route"in f&&ah){ae=ab=f.route||ae,Z.shallow||(ac=Object.assign({},f.query||{},ac));let a=(0,x.hasBasePath)(aa.pathname)?(0,v.removeBasePath)(aa.pathname):aa.pathname;if(ai&&ab!==a&&Object.keys(ai).forEach(a=>{ai&&ac[a]===ai[a]&&delete ac[a]}),(0,n.isDynamicRoute)(ab)){let a=!Z.shallow&&f.resolvedAs?f.resolvedAs:(0,w.addBasePath)((0,t.addLocale)(new URL(c,location.href).pathname,R.locale),!0);(0,x.hasBasePath)(a)&&(a=(0,v.removeBasePath)(a));let b=(0,q.getRouteRegex)(ab),d=(0,p.getRouteMatcher)(b)(new URL(a,location.href).pathname);d&&Object.assign(ac,d)}}if("type"in f)if("redirect-internal"===f.type)return this.change(a,f.newUrl,f.newAs,d);else return S({url:f.destination,router:this}),new Promise(()=>{});let g=f.Component;if(g&&g.unstable_scriptLoader&&[].concat(g.unstable_scriptLoader()).forEach(a=>{(0,h.handleClientScriptLoad)(a.props)}),(f.__N_SSG||f.__N_SSP)&&f.props){if(f.props.pageProps&&f.props.pageProps.__N_REDIRECT){d.locale=!1;let b=f.props.pageProps.__N_REDIRECT;if(b.startsWith("/")&&!1!==f.props.pageProps.__N_REDIRECT_BASE_PATH){let c=(0,o.parseRelativeUrl)(b);c.pathname=M(c.pathname,K);let{url:e,as:f}=L(this,b,b);return this.change(a,e,f,d)}return S({url:b,router:this}),new Promise(()=>{})}if(R.isPreview=!!f.props.__N_PREVIEW,f.props.notFound===O){let a;try{await this.fetchComponent("/404"),a="/404"}catch(b){a="/_error"}if(f=await this.getRouteInfo({route:a,pathname:a,query:ac,as:c,resolvedAs:ad,routeProps:{shallow:!1},locale:R.locale,isPreview:R.isPreview,isNotFound:!0}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on /404"),"__NEXT_ERROR_CODE",{value:"E158",enumerable:!1,configurable:!0})}}P&&"/_error"===this.pathname&&(null==(l=self.__NEXT_DATA__.props)||null==(k=l.pageProps)?void 0:k.statusCode)===500&&(null==(y=f.props)?void 0:y.pageProps)&&(f.props.pageProps.statusCode=500);let j=d.shallow&&R.route===(null!=(z=f.route)?z:ae),m=null!=(A=d.scroll)?A:!P&&!j,r=null!=e?e:m?{x:0,y:0}:null,s={...R,route:ae,pathname:ab,query:ac,asPath:$,isFallback:!1};if(P&&aj){if(f=await this.getRouteInfo({route:this.pathname,pathname:this.pathname,query:ac,as:c,resolvedAs:ad,routeProps:{shallow:!1},locale:R.locale,isPreview:R.isPreview,isQueryUpdating:P&&!this.isFallback}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on "+this.pathname),"__NEXT_ERROR_CODE",{value:"E225",enumerable:!1,configurable:!0});"/_error"===this.pathname&&(null==(G=self.__NEXT_DATA__.props)||null==(B=G.pageProps)?void 0:B.statusCode)===500&&(null==(H=f.props)?void 0:H.pageProps)&&(f.props.pageProps.statusCode=500);try{await this.set(s,f,r)}catch(a){throw(0,i.default)(a)&&a.cancelled&&U.events.emit("routeChangeError",a,$,Z),a}return!0}if(U.events.emit("beforeHistoryChange",c,Z),this.changeState(a,b,c,d),!(P&&!r&&!T&&!_&&(0,C.compareRouterStates)(s,this.state))){try{await this.set(s,f,r)}catch(a){if(a.cancelled)f.error=f.error||a;else throw a}if(f.error)throw P||U.events.emit("routeChangeError",f.error,$,Z),f.error;P||U.events.emit("routeChangeComplete",c,Z),m&&/#.+$/.test(c)&&this.scrollToHash(c)}return!0}catch(a){if((0,i.default)(a)&&a.cancelled)return!1;throw a}}changeState(a,b,c,d){void 0===d&&(d={}),("pushState"!==a||(0,m.getURL)()!==c)&&(this._shallow=d.shallow,window.history[a]({url:b,as:c,options:d,__N:!0,key:this._key="pushState"!==a?this._key:R()},"",c))}async handleRouteInfoError(a,b,c,d,e,f){if(a.cancelled)throw a;if((0,g.isAssetError)(a)||f)throw U.events.emit("routeChangeError",a,d,e),S({url:d,router:this}),I();console.error(a);try{let d,{page:e,styleSheets:f}=await this.fetchComponent("/_error"),g={props:d,Component:e,styleSheets:f,err:a,error:a};if(!g.props)try{g.props=await this.getInitialProps(e,{err:a,pathname:b,query:c})}catch(a){console.error("Error in error page `getInitialProps`: ",a),g.props={}}return g}catch(a){return this.handleRouteInfoError((0,i.default)(a)?a:Object.defineProperty(Error(a+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0}),b,c,d,e,!0)}}async getRouteInfo(a){let{route:b,pathname:c,query:d,as:e,resolvedAs:g,routeProps:h,locale:j,hasMiddleware:l,isPreview:m,unstable_skipClientCache:n,isQueryUpdating:o,isMiddlewareRewrite:p,isNotFound:q}=a,s=b;try{var t,u,w,x;let a=this.components[s];if(h.shallow&&a&&this.route===s)return a;let b=T({route:s,router:this});l&&(a=void 0);let i=!a||"initial"in a?void 0:a,y={dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),skipInterpolation:!0,asPath:q?"/404":g,locale:j}),hasMiddleware:!0,isServerRender:this.isSsr,parseJSON:!0,inflightCache:o?this.sbc:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n,isBackground:o},A=o&&!p?null:await N({fetchData:()=>Q(y),asPath:q?"/404":g,locale:j,router:this}).catch(a=>{if(o)return null;throw a});if(A&&("/_error"===c||"/404"===c)&&(A.effect=void 0),o&&(A?A.json=self.__NEXT_DATA__.props:A={json:self.__NEXT_DATA__.props}),b(),(null==A||null==(t=A.effect)?void 0:t.type)==="redirect-internal"||(null==A||null==(u=A.effect)?void 0:u.type)==="redirect-external")return A.effect;if((null==A||null==(w=A.effect)?void 0:w.type)==="rewrite"){let b=(0,f.removeTrailingSlash)(A.effect.resolvedHref),e=await this.pageLoader.getPageList();if((!o||e.includes(b))&&(s=b,c=A.effect.resolvedHref,d={...d,...A.effect.parsedAs.query},g=(0,v.removeBasePath)((0,k.normalizeLocalePath)(A.effect.parsedAs.pathname,this.locales).pathname),a=this.components[s],h.shallow&&a&&this.route===s&&!l))return{...a,route:s}}if((0,z.isAPIRoute)(s))return S({url:e,router:this}),new Promise(()=>{});let B=i||await this.fetchComponent(s).then(a=>({Component:a.page,styleSheets:a.styleSheets,__N_SSG:a.mod.__N_SSG,__N_SSP:a.mod.__N_SSP})),C=null==A||null==(x=A.response)?void 0:x.headers.get("x-middleware-skip"),D=B.__N_SSG||B.__N_SSP;C&&(null==A?void 0:A.dataHref)&&delete this.sdc[A.dataHref];let{props:E,cacheKey:F}=await this._getData(async()=>{if(D){if((null==A?void 0:A.json)&&!C)return{cacheKey:A.cacheKey,props:A.json};let a=(null==A?void 0:A.dataHref)?A.dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),asPath:g,locale:j}),b=await Q({dataHref:a,isServerRender:this.isSsr,parseJSON:!0,inflightCache:C?{}:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n});return{cacheKey:b.cacheKey,props:b.json||{}}}return{headers:{},props:await this.getInitialProps(B.Component,{pathname:c,query:d,asPath:e,locale:j,locales:this.locales,defaultLocale:this.defaultLocale})}});return B.__N_SSP&&y.dataHref&&F&&delete this.sdc[F],this.isPreview||!B.__N_SSG||o||Q(Object.assign({},y,{isBackground:!0,persistCache:!1,inflightCache:this.sbc})).catch(()=>{}),E.pageProps=Object.assign({},E.pageProps),B.props=E,B.route=s,B.query=d,B.resolvedAs=g,this.components[s]=B,B}catch(a){return this.handleRouteInfoError((0,i.getProperError)(a),c,d,e,h)}}set(a,b,c){return this.state=a,this.sub(b,this.components["/_app"].Component,c)}beforePopState(a){this._bps=a}onlyAHashChange(a){if(!this.asPath)return!1;let[b,c]=this.asPath.split("#",2),[d,e]=a.split("#",2);return!!e&&b===d&&c===e||b===d&&c!==e}scrollToHash(a){let[,b=""]=a.split("#",2);(0,G.disableSmoothScrollDuringRouteTransition)(()=>{if(""===b||"top"===b)return void window.scrollTo(0,0);let a=decodeURIComponent(b),c=document.getElementById(a);if(c)return void c.scrollIntoView();let d=document.getElementsByName(a)[0];d&&d.scrollIntoView()},{onlyHashChange:this.onlyAHashChange(a)})}urlIsNew(a){return this.asPath!==a}async prefetch(a,b,c){void 0===b&&(b=a),void 0===c&&(c={});let d=(0,o.parseRelativeUrl)(a),e=d.pathname,{pathname:g,query:h}=d,i=g,j=await this.pageLoader.getPageList(),k=b,l=void 0!==c.locale?c.locale||void 0:this.locale,m=await J({asPath:b,locale:l,router:this});d.pathname=M(d.pathname,j),(0,n.isDynamicRoute)(d.pathname)&&(g=d.pathname,d.pathname=g,Object.assign(h,(0,p.getRouteMatcher)((0,q.getRouteRegex)(d.pathname))((0,s.parsePath)(b).pathname)||{}),m||(a=(0,r.formatWithValidation)(d)));let t=await N({fetchData:()=>Q({dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:i,query:h}),skipInterpolation:!0,asPath:k,locale:l}),hasMiddleware:!0,isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0}),asPath:b,locale:l,router:this});if((null==t?void 0:t.effect.type)==="rewrite"&&(d.pathname=t.effect.resolvedHref,g=t.effect.resolvedHref,h={...h,...t.effect.parsedAs.query},k=t.effect.parsedAs.pathname,a=(0,r.formatWithValidation)(d)),(null==t?void 0:t.effect.type)==="redirect-external")return;let u=(0,f.removeTrailingSlash)(g);await this._bfl(b,k,c.locale,!0)&&(this.components[e]={__appRouter:!0}),await Promise.all([this.pageLoader._isSsg(u).then(b=>!!b&&Q({dataHref:(null==t?void 0:t.json)?null==t?void 0:t.dataHref:this.pageLoader.getDataHref({href:a,asPath:k,locale:l}),isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0,unstable_skipClientCache:c.unstable_skipClientCache||c.priority&&!0}).then(()=>!1).catch(()=>!1)),this.pageLoader[c.priority?"loadPage":"prefetch"](u)])}async fetchComponent(a){let b=T({route:a,router:this});try{let c=await this.pageLoader.loadPage(a);return b(),c}catch(a){throw b(),a}}_getData(a){let b=!1,c=()=>{b=!0};return this.clc=c,a().then(a=>{if(c===this.clc&&(this.clc=null),b){let a=Object.defineProperty(Error("Loading initial props cancelled"),"__NEXT_ERROR_CODE",{value:"E405",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}return a})}getInitialProps(a,b){let{Component:c}=this.components["/_app"],d=this._wrapApp(c);return b.AppTree=d,(0,m.loadGetInitialProps)(c,{AppTree:d,Component:a,router:this,ctx:b})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(a,b,c,{initialProps:d,pageLoader:e,App:g,wrapApp:h,Component:i,err:j,subscription:k,isFallback:l,locale:p,locales:q,defaultLocale:s,domainLocales:t,isPreview:u}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=R(),this.onPopState=a=>{let b,{isFirstPopStateEvent:c}=this;this.isFirstPopStateEvent=!1;let d=a.state;if(!d){let{pathname:a,query:b}=this;this.changeState("replaceState",(0,r.formatWithValidation)({pathname:(0,w.addBasePath)(a),query:b}),(0,m.getURL)());return}if(d.__NA)return void window.location.reload();if(!d.__N||c&&this.locale===d.options.locale&&d.as===this.asPath)return;let{url:e,as:f,options:g,key:h}=d;this._key=h;let{pathname:i}=(0,o.parseRelativeUrl)(e);(!this.isSsr||f!==(0,w.addBasePath)(this.asPath)||i!==(0,w.addBasePath)(this.pathname))&&(!this._bps||this._bps(d))&&this.change("replaceState",e,f,Object.assign({},g,{shallow:g.shallow&&this._shallow,locale:g.locale||this.defaultLocale,_h:0}),b)};let v=(0,f.removeTrailingSlash)(a);this.components={},"/_error"!==a&&(this.components[v]={Component:i,initial:!0,props:d,err:j,__N_SSG:d&&d.__N_SSG,__N_SSP:d&&d.__N_SSP}),this.components["/_app"]={Component:g,styleSheets:[]},this.events=U.events,this.pageLoader=e;let x=(0,n.isDynamicRoute)(a)&&self.__NEXT_DATA__.autoExport;this.basePath="",this.sub=k,this.clc=null,this._wrapApp=h,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.isExperimentalCompile||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!x&&!self.location.search),this.state={route:v,pathname:a,query:b,asPath:x?a:c,isPreview:!!u,locale:void 0,isFallback:l},this._initialMatchesMiddlewarePromise=Promise.resolve(!1)}}U.events=(0,l.default)()},8782:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"BloomFilter",{enumerable:!0,get:function(){return d}});class d{static from(a,b){void 0===b&&(b=1e-4);let c=new d(a.length,b);for(let b of a)c.add(b);return c}export(){let a={numItems:this.numItems,errorRate:this.errorRate,numBits:this.numBits,numHashes:this.numHashes,bitArray:this.bitArray};if(this.errorRate<1e-4){let b=JSON.stringify(a),d=c(8550).sync(b);d>1024&&console.warn("Creating filter with error rate less than 0.1% (0.001) can increase the size dramatically proceed with caution. Received error rate "+this.errorRate+" resulted in size "+b.length+" bytes, "+d+" bytes (gzip)")}return a}import(a){this.numItems=a.numItems,this.errorRate=a.errorRate,this.numBits=a.numBits,this.numHashes=a.numHashes,this.bitArray=a.bitArray}add(a){this.getHashValues(a).forEach(a=>{this.bitArray[a]=1})}contains(a){return this.getHashValues(a).every(a=>this.bitArray[a])}getHashValues(a){let b=[];for(let c=1;c<=this.numHashes;c++){let d=function(a){let b=0;for(let c=0;c<a.length;c++)b=Math.imul(b^a.charCodeAt(c),0x5bd1e995),b^=b>>>13,b=Math.imul(b,0x5bd1e995);return b>>>0}(""+a+c)%this.numBits;b.push(d)}return b}constructor(a,b=1e-4){this.numItems=a,this.errorRate=b,this.numBits=Math.ceil(-(a*Math.log(b))/(Math.log(2)*Math.log(2))),this.numHashes=Math.ceil(this.numBits/a*Math.log(2)),this.bitArray=Array(this.numBits).fill(0)}}},9007:(a,b)=>{"use strict";function c(){return""}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getDeploymentIdQueryOrEmptyString",{enumerable:!0,get:function(){return c}})},9021:a=>{"use strict";a.exports=require("fs")},9083:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(8732),e=c(2015);let f=({onFilterChange:a,stations:b=[],activeFilters:c={}})=>{let[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(c.search||""),[j,k]=(0,e.useState)(c.fuelType||"all"),[l,m]=(0,e.useState)(c.brand||"all"),[n,o]=(0,e.useState)(c.priceRange||{min:"",max:""}),[p,q]=(0,e.useState)(c.sortBy||"name"),[r,s]=(0,e.useState)(c.region||"all"),t=["all",...new Set(b.flatMap(a=>a.fuelPrices?.map(a=>a.fuelType)||[]))].filter(Boolean),u=["all",...new Set(b.map(a=>a.brand).filter(Boolean))];(0,e.useEffect)(()=>{a({search:h,fuelType:j,brand:l,priceRange:n,sortBy:p,region:r})},[h,j,l,n,p,r,a]);let v=[h,"all"!==j,"all"!==l,n.min||n.max,"all"!==r].filter(Boolean).length;return(0,d.jsxs)("div",{className:"advanced-filters",children:[(0,d.jsxs)("div",{className:"filter-search-container",children:[(0,d.jsxs)("div",{className:"search-input-wrapper",children:[(0,d.jsx)("span",{className:"search-icon","aria-hidden":"true",children:"\uD83D\uDD0D"}),(0,d.jsx)("input",{type:"search",name:"station-search",className:"filter-search-input",placeholder:"Search by station name, address, suburb...",value:h,onChange:a=>i(a.target.value),"aria-label":"Search stations"}),h&&(0,d.jsx)("button",{className:"clear-search-btn",onClick:()=>i(""),"aria-label":"Clear search",children:"✕"})]}),(0,d.jsxs)("button",{className:`toggle-filters-btn ${f?"active":""}`,onClick:()=>g(!f),"aria-expanded":f,"aria-controls":"filter-panel",children:[(0,d.jsx)("span",{className:"filter-icon","aria-hidden":"true",children:"⚙️"}),"Filters",v>0&&(0,d.jsx)("span",{className:"filter-badge","aria-label":`${v} filters active`,children:v})]})]}),f&&(0,d.jsxs)("div",{id:"filter-panel",className:"filter-panel",role:"region","aria-label":"Filter options",children:[(0,d.jsxs)("div",{className:"filter-grid",children:[(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"fuel-type-filter",className:"filter-label",children:"⛽ Fuel Type"}),(0,d.jsxs)("select",{id:"fuel-type-filter",name:"fuel-type-filter",className:"filter-select",value:j,onChange:a=>k(a.target.value),children:[(0,d.jsx)("option",{value:"all",children:"All Fuel Types"}),t.filter(a=>"all"!==a).map(a=>(0,d.jsx)("option",{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))]})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"brand-filter",className:"filter-label",children:"\uD83C\uDFEA Brand"}),(0,d.jsxs)("select",{id:"brand-filter",name:"brand-filter",className:"filter-select",value:l,onChange:a=>m(a.target.value),children:[(0,d.jsx)("option",{value:"all",children:"All Brands"}),u.filter(a=>"all"!==a).map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"region-filter",className:"filter-label",children:"\uD83D\uDCCD Region"}),(0,d.jsx)("select",{id:"region-filter",name:"region-filter",className:"filter-select",value:r,onChange:a=>s(a.target.value),children:["all","North Melbourne","South Melbourne","East Melbourne","West Melbourne","CBD"].map(a=>(0,d.jsx)("option",{value:a,children:"all"===a?"All Regions":a},a))})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{htmlFor:"sort-filter",className:"filter-label",children:"\uD83D\uDD04 Sort By"}),(0,d.jsxs)("select",{id:"sort-filter",name:"sort-filter",className:"filter-select",value:p,onChange:a=>q(a.target.value),children:[(0,d.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,d.jsx)("option",{value:"price-low",children:"Price (Low to High)"}),(0,d.jsx)("option",{value:"price-high",children:"Price (High to Low)"}),(0,d.jsx)("option",{value:"distance",children:"Distance (Nearest)"}),(0,d.jsx)("option",{value:"updated",children:"Recently Updated"})]})]}),(0,d.jsxs)("div",{className:"filter-group filter-group-wide",children:[(0,d.jsx)("label",{className:"filter-label",children:"\uD83D\uDCB0 Price Range (per liter)"}),(0,d.jsxs)("div",{className:"price-range-inputs",children:[(0,d.jsx)("input",{type:"number",className:"price-input",placeholder:"Min",step:"0.01",min:"0",value:n.min,onChange:a=>o({...n,min:a.target.value}),"aria-label":"Minimum price"}),(0,d.jsx)("span",{className:"price-separator",children:"to"}),(0,d.jsx)("input",{type:"number",className:"price-input",placeholder:"Max",step:"0.01",min:"0",value:n.max,onChange:a=>o({...n,max:a.target.value}),"aria-label":"Maximum price"})]})]})]}),(0,d.jsxs)("div",{className:"filter-actions",children:[(0,d.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>{i(""),k("all"),m("all"),o({min:"",max:""}),q("name"),s("all")},disabled:0===v,children:"Clear All Filters"}),(0,d.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>g(!1),children:"Close"})]})]}),v>0&&!f&&(0,d.jsxs)("div",{className:"active-filters-tags",children:[h&&(0,d.jsxs)("span",{className:"filter-tag",children:['Search: "',h,'"',(0,d.jsx)("button",{onClick:()=>i(""),"aria-label":"Remove search filter",children:"✕"})]}),"all"!==j&&(0,d.jsxs)("span",{className:"filter-tag",children:["Fuel: ",j,(0,d.jsx)("button",{onClick:()=>k("all"),"aria-label":"Remove fuel type filter",children:"✕"})]}),"all"!==l&&(0,d.jsxs)("span",{className:"filter-tag",children:["Brand: ",l,(0,d.jsx)("button",{onClick:()=>m("all"),"aria-label":"Remove brand filter",children:"✕"})]}),"all"!==r&&(0,d.jsxs)("span",{className:"filter-tag",children:["Region: ",r,(0,d.jsx)("button",{onClick:()=>s("all"),"aria-label":"Remove region filter",children:"✕"})]}),(n.min||n.max)&&(0,d.jsxs)("span",{className:"filter-tag",children:["Price: $",n.min||"0"," - $",n.max||"∞",(0,d.jsx)("button",{onClick:()=>o({min:"",max:""}),"aria-label":"Remove price filter",children:"✕"})]})]})]})}},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9561:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return r},handleClientScriptLoad:function(){return o},initScriptLoader:function(){return p}});let d=c(7020),e=c(3147),f=c(8732),g=d._(c(2326)),h=e._(c(2015)),i=c(1523),j=c(6385),k=c(1994),l=new Map,m=new Set,n=a=>{let{src:b,id:c,onLoad:d=()=>{},onReady:e=null,dangerouslySetInnerHTML:f,children:h="",strategy:i="afterInteractive",onError:k,stylesheets:n}=a,o=c||b;if(o&&m.has(o))return;if(l.has(b)){m.add(o),l.get(b).then(d,k);return}let p=()=>{e&&e(),m.add(o)},q=document.createElement("script"),r=new Promise((a,b)=>{q.addEventListener("load",function(b){a(),d&&d.call(this,b),p()}),q.addEventListener("error",function(a){b(a)})}).catch(function(a){k&&k(a)});f?(q.innerHTML=f.__html||"",p()):h?(q.textContent="string"==typeof h?h:Array.isArray(h)?h.join(""):"",p()):b&&(q.src=b,l.set(b,r)),(0,j.setAttributesFromProps)(q,a),"worker"===i&&q.setAttribute("type","text/partytown"),q.setAttribute("data-nscript",i),n&&(a=>{if(g.default.preinit)return a.forEach(a=>{g.default.preinit(a,{as:"style"})})})(n),document.body.appendChild(q)};function o(a){let{strategy:b="afterInteractive"}=a;"lazyOnload"===b?window.addEventListener("load",()=>{(0,k.requestIdleCallback)(()=>n(a))}):n(a)}function p(a){a.forEach(o),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(a=>{let b=a.id||a.getAttribute("src");m.add(b)})}function q(a){let{id:b,src:c="",onLoad:d=()=>{},onReady:e=null,strategy:j="afterInteractive",onError:l,stylesheets:o,...p}=a,{updateScripts:q,scripts:r,getIsSsr:s,appDir:t,nonce:u}=(0,h.useContext)(i.HeadManagerContext);u=p.nonce||u;let v=(0,h.useRef)(!1);(0,h.useEffect)(()=>{let a=b||c;v.current||(e&&a&&m.has(a)&&e(),v.current=!0)},[e,b,c]);let w=(0,h.useRef)(!1);if((0,h.useEffect)(()=>{if(!w.current){if("afterInteractive"===j)n(a);else"lazyOnload"===j&&("complete"===document.readyState?(0,k.requestIdleCallback)(()=>n(a)):window.addEventListener("load",()=>{(0,k.requestIdleCallback)(()=>n(a))}));w.current=!0}},[a,j]),("beforeInteractive"===j||"worker"===j)&&(q?(r[j]=(r[j]||[]).concat([{id:b,src:c,onLoad:d,onReady:e,onError:l,...p,nonce:u}]),q(r)):s&&s()?m.add(b||c):s&&!s()&&n({...a,nonce:u})),t){if(o&&o.forEach(a=>{g.default.preinit(a,{as:"style"})}),"beforeInteractive"===j)if(!c)return p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,f.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...p,id:b}])+")"}});else return g.default.preload(c,p.integrity?{as:"script",integrity:p.integrity,nonce:u,crossOrigin:p.crossOrigin}:{as:"script",nonce:u,crossOrigin:p.crossOrigin}),(0,f.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([c,{...p,id:b}])+")"}});"afterInteractive"===j&&c&&g.default.preload(c,p.integrity?{as:"script",integrity:p.integrity,nonce:u,crossOrigin:p.crossOrigin}:{as:"script",nonce:u,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(q,"__nextScript",{value:!0});let r=q;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},9942:(a,b,c)=>{"use strict";function d(a){return a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeBasePath",{enumerable:!0,get:function(){return d}}),c(2858),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},9974:(a,b)=>{"use strict";function c(a,b){let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d=c.length;d--;){let e=c[d];if("query"===e){let c=Object.keys(a.query);if(c.length!==Object.keys(b.query).length)return!1;for(let d=c.length;d--;){let e=c[d];if(!b.query.hasOwnProperty(e)||a.query[e]!==b.query[e])return!1}}else if(!b.hasOwnProperty(e)||a[e]!==b[e])return!1}return!0}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"compareRouterStates",{enumerable:!0,get:function(){return c}})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[404,277,341,200,610,800,413],()=>b(b.s=499));module.exports=c})();